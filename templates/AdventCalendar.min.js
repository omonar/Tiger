!function(a,e,t,n){"use strict";a.fn.adventCalendar=function(e){if(a(this).data("adventcalendar")&&(e=a.extend({},e,a(this).data("adventcalendar"))),(e=a.extend({},a.fn.adventCalendar.defaults,e)).hasOwnProperty("start")&&e.hasOwnProperty("duration")){var t,n,s=a.extend({},{thumbsVisible:!0,captionVisible:!0,fitImages:!0,scaleUp:!0},e.lightbox),o=a(this),r=o.find("."+e.cardClass).not(".empty"),d="lac_"+Math.floor(1e4*Math.random()),l=[],i="",c=function(){var n=new Date(e.start),c=new Date,h=this,u=function(n,l){var i,c=r.eq(n),u=h[n%h.length],g=c.find("."+e.thumbClass);c.data(J.OBJ,u),t.isLightboxable(u)&&c.addClass(e.lbableClass),(i=a("<img>",{class:"hide-image"}).appendTo(g)).one("load."+d,function(){a(this).addClass("show-image").removeClass("hide-image")}).on("click."+d,function(){r.trigger("lightboxLoad",a(this).closest("."+e.cardClass))}).attr("src",t.getThumbPath(u)),i[0].complete&&i.trigger("load"),l&&(o.trigger("lightboxRemove"),setTimeout(function(){o.lightbox(t,s)},250))};h&&h.length&&(r.each(function(t){var s=a(this).find("."+e.coverClass);c>n?"1"===l[t]?(s.hide(),u(t),a(this).addClass(e.openingClass)):(s.addClass(e.canopenClass),s.on("click",function(){var t=a(this).closest("."+e.cardClass),n=t.data("num");u(n,!0),t.addClass(e.openingClass),setTimeout(function(){s.remove()},e.transLength/2),l[n]="1",localStorage.setItem("advcalendar_"+i,l.join(":"))})):s.addClass(e.cannotopenClass),a(this).data("num",t),n.setDate(n.getDate()+1)}),o.lightbox(t,s))};t=new Album(a,{indexName:e.indexName,rootPath:e.rootPath,relPath:e.relPath,audioPoster:e.audioPoster,videoPoster:e.videoPoster,ready:function(){i=t.getRootProperty(J.NAME),function(){var a;for((a=localStorage.getItem("advcalendar_"+i))&&(l=a.split(":"));l.length<e.duration;)l.push("0")}(),n=t.collectByDate({range:9999,max:e.duration,sort:"latest"===e.select,reverse:!0,depth:"tree",ready:c})}})}else console.log("Advent Calendar error: No start date or duration specified!")},a.fn.adventCalendar.defaults={indexName:"index.html",relPath:"",rootPath:"",audioPoster:"audio.poster.png",videoPoster:"video.poster.png",duration:24,transLength:1e3,select:"latest",cardClass:"card",thumbClass:"thumb",coverClass:"cover",canopenClass:"canopen",cannotopenClass:"cannotopen",lbableClass:"lbable",openingClass:"open"},a("[data-adventcalendar]").adventCalendar()}(jQuery,jQuery(window),jQuery(document));