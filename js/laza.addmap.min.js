!function(e,o,n,t){"use strict";e.fn.addMap=function(o){o=e.extend({},e.fn.addMap.defaults,o);var t=function(e){var o,n;return"string"==typeof e?(e=e.split(","),o=parseFloat(e[0]),n=e.length>1?parseFloat(e[1]):0):(o=e[0]||e.lat||0,n=e[1]||e.lng||0),{lat:o,lng:n}},a=function(o,n){var a,r,l=function(){e.isFunction(n.click)&&n.click.call(this)};if(n.markers&&n.markers.length>1){!function(e){for(var o=0;o<e.length;o++)e[o].hasOwnProperty("pos")&&!e[o].hasOwnProperty("latLng")&&(e[o].latLng=t(e[o].pos))}(n.markers);var s=function(e){for(var o,n=-180,t=-90,a=90,r=180,l=0;l<e.length;l++)(o=e[l].latLng)&&(r>o.lng&&(r=o.lng),a>o.lat&&(a=o.lat),n<o.lng&&(n=o.lng),t<o.lat&&(t=o.lat));return n<r&&(n=180,r=-180),t<a&&(t=90,a=-90),{east:n,west:r,north:t,south:a}}(n.markers),i=n.markers.length;a=new google.maps.Map(o[0],{center:{lat:(s.north+s.south)/2,lng:(s.east+s.west)/2},zoom:n.zoom,mapTypeId:n.type,fullscreenControl:n.fullscreenControl,scrollwheel:!1,panControl:!1,controlSize:32});for(var p=0;p<i;p++)n.markers[p].hasOwnProperty("latLng")&&(r=new google.maps.Marker({position:n.markers[p].latLng,map:a}),n.markers[p].hasOwnProperty("title")&&r.setTitle(n.markers[p].title),n.markers[p].hasOwnProperty("link")&&(r.link=n.markers[p].link,google.maps.event.addListener(r,"click",l)));!n.fitBounds||s.east===s.west&&s.north===s.south||google.maps.event.addListenerOnce(a,"idle",function(){a.fitBounds(s)})}else{var c=t(n.location||n.markers[0].pos);a=new google.maps.Map(o[0],{center:c,zoom:n.zoom,mapTypeId:n.type,fullscreenControl:n.fullscreenControl,scrollwheel:!1,panControl:!1,controlSize:32}),r=new google.maps.Marker({position:c,map:a})}n.hasOwnProperty("onTypeChanged")&&e.isFunction(n.onTypeChanged)&&google.maps.event.addListener(a,"maptypeid_changed",function(){n.onTypeChanged.call(a.getMapTypeId())}),n.hasOwnProperty("onZoomChanged")&&e.isFunction(n.onZoomChanged)&&google.maps.event.addListener(a,"zoom_changed",function(){n.onZoomChanged.call(a.getZoom())})};return"file:"!==location.protocol&&"localhost"!==location.host?e(this).each(function(){!function(e,o){if("undefined"==typeof google||!google.maps){var t=n.createElement("script");return t.type="text/javascript",t.src=o.apiUrl+(void 0===o.apiKey?"":"?key="+o.apiKey),t.onload=function(){setTimeout(function(){a(e,o)},40)},void n.body.appendChild(t)}a(e,o)}(e(this),e.extend(o,readData(e(this),"location,type,zoom,label,markers,current")))}):this},e.fn.addMap.defaults={apiUrl:"https://maps.googleapis.com/maps/api/js",zoom:16,fitBounds:!0,type:"roadmap",fullscreenControl:!0}}(jQuery,window,document);