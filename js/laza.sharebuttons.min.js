!function(e){"use strict";e.fn.renderShares=function(t){t=e.extend({},e.fn.renderShares.defaults,t);var i,a,n,r=e(this),s=getTranslations({share:"Share",shareOn:"Share on",checkThisOut:"Found this page",email:"Email",slideshow:"Slideshow",copy:"Copy",copied:"Copied",localWarning:"Can't share local albums. Please upload your album first!"}),o=encodeURIComponent(t.callAction||s.checkThisOut),l=(t.label||s.share,t.indexName.getExt(),function(e){var t,i=this.querySelector("input[name=url]"),a=i.value;if(i){i.focus(),i.setSelectionRange(0,a.length);try{t=document.execCommand("copy")}catch(e){t=!1}t&&(i.value=s.copied+"...",i.classList.add("copied"),setTimeout(function(){i.value=a,i.classList.remove("copied")},500))}return!1}),c=function(e){var t=this.checked,i=this.name,a=this.parentNode.querySelector("input[name=url]");t?a.value.indexOf("#")>=0?-1===a.value.indexOf(new RegExp("[#&]"+i))&&(a.value+="&"+i):a.value+="#"+i:a.value=a.value.replace(new RegExp("[#&]"+i,"g"),"")},d=function(i,n){typeof i===UNDEF?n=t:(typeof n===UNDEF&&(n={}),n.hasOwnProperty("href")||(n.href=window.location.href),n.hasOwnProperty("title")&&(n.title=n.title.stripHTML()),n.hasOwnProperty("description")&&(n.description=n.description.stripHTML()),n=e.extend({},t,n)),n.image.startsWith("http")||(n.image=window.location.href.getDir()+n.image);var d=e(n.currCardHook);if(d.length){if(n.title=d.find(".caption .title").text(),!n.title){var p=d.find("img, video");n.title=p.length?p.attr("title")||p.attr("alt")||(p.attr("src")?p.attr("src").getFile().replace(/\.(jpg|gif|png|mp4)$/i,"").replace(/_/g," "):""):""}if(n.description=d.find(".caption .comment").text(),!n.hasOwnProperty("image")){var h=e(n.currCardHook+" img");h.length?n.image=h.attr("src"):(h=e(n.currCardHook+" video")).length?n.image=h.attr("src").replaceExt("jpg"):(h=e("link[rel=image_src]"),n.image=h.length?h.attr("href"):window.location.href.getDir()+"folderthumb.jpg")}n.usePreview&&(n.image&&b.attr("src",n.image),a.empty(),n.title&&a.append('<h3 class="title">'+n.title+"</h3>"),n.description&&a.append('<div class="description">'+n.description+"</div>"))}var u,m=encodeURIComponent(n.href),f=n.href.indexOf("#img=")>0?n.href.replace(t.indexName,"").replace("#img=","slides/").replaceExt(n.pageExt):n.href,g=encodeURIComponent(n.title),w=encodeURIComponent(n.description),b=encodeURIComponent(n.image);r.find("."+t.sharesClass+" a").each(function(){var i=e(this);switch(i.data("share")){case"facebook":if(typeof FB!==UNDEF)return void i.off(".share").on("click.share",function(){return FB.ui({method:"feed",link:f,caption:n.title,description:n.description,picture:n.image}),!1});u="https://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+n.href+"&p%5Bimages%5D%5B0%5D="+n.image+"&p%5Btitle%5D="+g;break;case"twitter":u="https://twitter.com/home?status="+g+": "+m;break;case"tumblr":u="https://www.tumblr.com/share/link?url="+m+"&name="+g;break;case"pinterest":u="https://pinterest.com/pin/create/button/?url="+m+"&media="+b+"&description="+g;break;case"linkedin":u="https://www.linkedin.com/shareArticle?mini=true&url="+m+"&title="+g+"&summary="+w;break;case"digg":u="https://digg.com/submit?url="+n.href;break;case"reddit":u="https://www.reddit.com/submit?url="+n.href;break;case"email":u="mailto:?subject="+o+"&body="+g+"%0D%0A"+w+"%0D%0A"+encodeURI(n.href);break;case"link":var a=e('<form class="copy-url"><input name="url" type="text" readonly value="'+n.href+'"><input name="slideshow" id="slideshowcb" type="checkbox"><label for="slideshowcb">'+s.slideshow+'</label> <button type="submit" class="button icon-copy"> '+s.copy+"</button></form>");return a.on("submit",l),a.find("[name=slideshow]").on("change",c),void i.trigger("destroyTooltip").addTooltip(a,{stay:3e3,pos:t.pos});default:return}i.attr({href:u,target:"_blank"})})};if(t.hasOwnProperty("href")||(t.href=window.location.href),!t.hasOwnProperty("image")){var p=e("link[rel=image_src]");t.image=p.length?p.attr("href"):window.location.href.getDir()+"folderthumb.jpg"}return t.hasOwnProperty("title")||(t.title=r.find("h3,.title").eq(0).text()||e("meta[name=title]").attr("content")||e("title").text()||""),t.hasOwnProperty("description")||(t.description=r.find(".description").text()||""),t.hasOwnProperty("pageExt")||(t.pageExt=t.indexName.getExt()),t.usePreview?((i=r.find("."+t.contClass)).length||(i=e("<div>",{class:t.contClass}).appendTo(r)),(p=i.find("img")).length||(p=e("<img>",{src:t.image}).appendTo(i)),(a=i.find("."+t.captionClass)).length||(a=e("<div>",{class:t.captionClass,html:'<h3 class="title">'+t.title+"</h3>"+(t.description?'<div class="description">'+t.description+"</div>":"")}).appendTo(i)),(n=i.find("."+t.socialLinksClass)).length||(n=e("<div>",{class:t.socialLinksClass}).appendTo(i))):n=r,function(i){for(var a,n,o=e("<div>",{class:t.sharesClass}).appendTo(i||r),l=t.sites.split(","),c=0;c<l.length;c++)a=l[c],"facebook,twitter,tumblr,pinterest,linkedin,digg,reddit,email,link".indexOf(a)>=0&&(n=e("<a>",{class:t.btnClass+" icon-"+a.unCamelCase(),rel:"noopener",text:" "+(t.buttonLabels?a.capitalize():"")}).data("share",a).appendTo(o),"email"===a?n.data("tooltip",s.email):"link"!==a&&n.data("tooltip",s.shareOn+" "+a.capitalize()));d(),o.children("a").not(".icon-link").addTooltip({pos:t.pos})}(n),t.hasOwnProperty("buttons")&&!LOCAL&&function(i){for(var a=t.buttons.split(","),n=encodeURIComponent(window.location.href.split("#")[0]),s=encodeURIComponent(t.title||e("meta[name=title]").attr("content")||e("title").text()),o=t.image?(t.image.startsWith("http")?"":window.location.href.getDir())+encodeURIComponent(t.image):e("link[rel=image_src]").attr("href"),l=e("<div>",{class:t.buttonsClass}).appendTo(i||r),c=0;c<a.length;c++)switch(a[c]){case"facebook":l.append('<div class="likebtn fb-like" data-href="'+n+'" data-layout="button_count" data-action="like" data-size="large" data-show-faces="false" data-share="false"></div>');break;case"twitter":l.append('<a class="likebtn twitter-share-button icon-twitter" href="https://twitter.com/intent/tweet?text='+s+"&url="+n+'" data-size="large" target="_blank"> Tweet</a>');break;case"pinterest":l.append('<div class="likebtn"><a data-pin-do="buttonPin" data-pin-count="beside" data-pin-tall="true" data-pin-save="true" href="https://www.pinterest.com/pin/create/button/?url='+n+"&media="+o+"&description="+s+'" data-pin-do="buttonPin"></a></div>')}}(n),r.closest(".modal").length&&r.find("."+t.sharesClass+" a").on("click",function(){return e(this).closest(".modal").trigger("close"),!0}),r.on("updateLinks",d),this},e.fn.renderShares.defaults={buttonLabels:!1,usePreview:!0,contClass:"preview",captionClass:"caption",socialLinksClass:"social-links",sharesClass:"shares",buttonsClass:"buttons",btnClass:"btn",sites:"facebook,twitter,tumblr",indexName:"index.html",currCardHook:".lightbox .curr",pos:[2,1,0,1]}}(jQuery);