!function(t,e,n,i){"use strict";t.fn.slider=function(i){i=t.extend({delegate:"ul li",fill:"img.fill",auto:!0,speed:600,delay:4e3,preloadNext:!0},i);var o,a=t(this),s=a.data("lsl_ns")||"lsl_"+Math.floor(1e4*Math.random()),r=t([]),u=t(),l=1,f=a.width(),d=a.height(),c=t(),h=t(),p=0,m=0,g=0,v=null,w=!1,M=function(t){return t.touches&&1===t.touches.length?Math.round(t.touches[0].pageX):null!==t.pageX?Math.round(t.pageX):null},T=function(t){var e=t,n=0;e<0?e+=r.length:e>=r.length&&(e%=r.length),v=clearTimeout(v),w=!1,c.hide();var o=r.filter(":visible");if(o.length>1&&o.not(u).hide(),u.length){if(n=r.index(u),e===n)return!0;l=t>n?1:-1,x()}g=0,C(e),u=r.eq(e),setTimeout(function(){i.fill?y(function(){k()}):k()},10)},y=function(e){var n=u.find(i.fill);t("<img>").one("load",function(i){var o=i.target;o&&b(n,o.width,o.height),t.isFunction(e)&&e.call(this)}).attr("src",n.attr("src"))},b=function(t,e,n){var i=Math.max(f/e,d/n),o=[Math.ceil(e*i),Math.ceil(n*i)];t.transform({origo:[Math.round((f-e)/2),Math.round((d-n)/2)],baseScale:i,baseSize:[e,n]}).data("fillSize",o)},x=function(){var e=u;switch(e.css({"z-index":0}),i.transition){case"slideOver":setTimeout(function(){e.stop(!0,!1).show(),e.opacity(.4,i.speed,function(){e.hide()})},50);break;case"slide":setTimeout(function(){e.transform({position:[-f*l,void 0]},i.speed,function(){t(this).hide()})},60);break;case"kenburns":default:e.data("swiped")||e.opacity(0,i.speed,function(){e.hide()})}},k=function(){var e=u;switch(e.css({"z-index":1}),i.transition){case"slideOver":e.show().transform({position:[100*l,0],opacity:0},function(){t(this).transform({position:[0,0],opacity:1},i.speed,O)});break;case"slide":e.show().transform({position:[f*l,void 0]},function(){t(this).transform({position:[0,void 0]},i.speed,O)});break;case"kenburns":var n=e.find(i.fill),o=n.data("fillSize");setTimeout(function(){e.show().transform({position:[0,0],opacity:0},function(){var a=Math.random();a>.5?(a=1.05+.4*(a-.5),n.transform({position:[Math.random()*a*(f-o[0])/2,Math.random()*a*(d-o[1])/2],scale:a},function(){t(this).transform({position:[0,0],scale:1},i.speed,O)})):(a=1.05+.4*a,n.transform({position:[Math.random()*a*(f-o[0])/2,Math.random()*a*(d-o[1])/2],scale:a},i.speed,O)),e.opacity(1,i.speed,function(){})})},i.speed/8);break;default:e.transform({position:[0,0],opacity:0},function(){t(this).show().opacity(1,i.speed,O)})}},O=function(){clearTimeout(v),w||(v=setTimeout(l<0?E:z,Math.max(i.delay,i.speed)))},E=function(){T((u.length?r.index(u):0)-1)},z=function(){T((u.length?r.index(u):0)+1)},C=function(t){return h.children("span").css({left:h.width()*t/r.length}),!0};return a.add(e).off("."+s),a.data("lsl_ns",s),a.find(i.delegate).each(function(e){var l=t(this),h=function(t){return!o||(m=M(t.originalEvent),g=m-p,u.transform({position:[g,void 0]}),!1)},y=function(e){var i=(new Date).getTime()-o;return o=0,n.off("mousemove."+s),a.off("mouseup."+s+" mouseout."+s),Math.abs(g)>50?(u.data("swiped",!0),u.transform({position:[g*(1+1e3/i),void 0]},1e3,function(){u.data("swiped",!1)}),g>0?E():z()):(u.transform({position:[0,void 0]},300),function(e){if(e){var n=e[0]-a.offset().left;e[1]-a.offset().top>.9*d?T(Math.floor(n*r.length/f)):n>.9*f?z():n<.1*f?E():(v&&(v=clearTimeout(v)),w?(z(),w=!1):(c.fadeIn(100,function(){setTimeout(function(){c.fadeOut(1e3,function(){t(this).hide()})},1e3)}),w=!0))}}(function(t){return t.touches&&1===t.touches.length?[Math.round(t.touches[0].pageX),Math.round(t.touches[0].pageY)]:null!==t.clientX?[Math.round(t.pageX),Math.round(t.pageY)]:null}(e.originalEvent))),!1};r=r.add(l),l.add(l.find(i.fill)).css({position:"absolute"}),l.attr("draggable","true").on(TOUCH.START+"."+s+" mousedown."+s,function(t){return l.stop(!0,!1),o=(new Date).getTime(),p=M(t.originalEvent),"mousedown"===t.type&&(n.on("mousemove."+s,h),a.on("mouseup."+s+" mouseout."+s,y)),"touchstart"===t.type}).on(TOUCH.MOVE+"."+s,h).on(TOUCH.END+"."+s+" "+TOUCH.CANCEL+"."+s,y).on("selectstart."+s,function(t){return t.preventDefault(),!1})}),r.filter(":visible").length?(u=r.filter(":visible").eq(0),r.not(u).hide()):(u=r.eq(0)).show(),y(),r.length>1&&(a.on("goto."+s,function(t){return gotoImage(t),!1}).on("quit."+s,function(){return quitSlider(),!1}).on("next."+s,function(){return nextImage(),!1}).on("previous."+s,function(){return previousImage(),!1}),c=t("<div>",{class:"slider-pause"}).hide().on("click."+s,function(t){return t.preventDefault(),z(),!1}).appendTo(a),h=t("<div>",{class:"slider-progress"}).on("click."+s,function(t){t.preventDefault();var e=M(t.originalEvent);return null!==e&&T(Math.floor((e-h.offset().left)*r.length/h.width())),!1}).append(t("<span>").css({left:"0",width:100/r.length+"%"})).appendTo(a),v=setTimeout(z,i.delay+1e3)),e.on("resize."+s,function(){f=a.width(),d=a.height(),r.each(function(){t(this).css({width:"100%",height:"100%"})}),C(),i.fill&&y()}),this}}(jQuery,jQuery(window),jQuery(document));