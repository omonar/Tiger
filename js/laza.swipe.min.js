!function(e,t,n,o){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onClick:!1,onFinished:!1,treshold:20,swipeoutSpeed:300,overTreshold:.25},o);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null},r=function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null};return this.each(function(){var u,s,l,d,p,h,c,f=e(this),g=f.parent(),w=f.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),m=!0,v=null,S=f.hasClass("audio")||f.hasClass("video"),T=function(e){return!!(e.originalEvent.touches&&e.originalEvent.touches.length>1)||(e.preventDefault(),m?(h=r(e.originalEvent)-p,f.translateX(c+h)):((h=i(e.originalEvent))[0]-=p[0],h[1]-=p[1],f.translate([c[0]+h[0],c[1]+h[1]])),!1)},y=function(t){if(f.data("swipeEnded"))return!0;t.preventDefault(),f.data("swipeEnded",!0);var a=(new Date).getTime()-d,i=1+o.swipeoutSpeed/a,r=function(){"function"==typeof o.onFinished&&o.onFinished.call(f[0],t)},l=function(){h&&"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(f[0],t),"function"==typeof o.onClick&&o.onClick.call(f[0],t)},p=function(e){e?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(f[0],t):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(f[0],t)};if("mouseup"===t.type||"mouseout"===t.type?(n.off("mousemove."+w),f.off("mouseup."+w+" mouseout."+w)):"pointerup"===t.type&&f.off("pointermove."+w+" pointerup."+w),f.data("taplength",a),m)if(Math.abs(h)>o.treshold){S=c+h*i;s[0]>=u[0]||h>0&&S-u[0]/2>s[0]*(o.overTreshold-.5)||S+u[0]/2<s[0]*(.5-o.overTreshold)?(f.data("scrolling",!1),f.translateXAndFade(S,0,o.swipeoutSpeed),v=setTimeout(r,o.swipeoutSpeed+20),p(h>0)):f.translateX(S,o.swipeoutSpeed)}else h&&f.translateX(0,100),l();else if(function(t){return e.isArray(t)?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):Math.abs(t)}(h)>o.treshold){var g=parseInt(f.css("top")),S=[c[0]+h[0]*i,h[1]>0?Math.min(-g,c[1]+h[1]*i):Math.max(-g+s[1]-u[1],c[1]+h[1]*i)];h[0]>0&&S[0]-u[0]/2>s[0]*(o.overTreshold-.5)||S[0]+u[0]/2<s[0]*(.5-o.overTreshold)?(f.data("scrolling",!1),f.translateAndFade(S,0,o.swipeoutSpeed),v=setTimeout(r,o.swipeoutSpeed+20),p(h[0]>=0)):f.translate(S,o.swipeoutSpeed)}else(h[0]||h[1])&&f.translate([0,0],100),l();return!1};f.add(n).off("."+w),f.data("lsw_ns",w),t.on("resize."+w,function(){clearTimeout(l),l=setTimeout(function(){s=a(g)},50)}),f.attr("draggable","false").on(TOUCH.START+"."+w+" dragstart."+w+" mousedown."+w,function(t){if(f.data("scrolling"))return!1;if(t.originalEvent.touches&&t.originalEvent.touches.length>1||"mousedown"===t.type&&1!==t.which)return!0;if(S){var o=t.target.nodeName.toLowerCase();if("audio"===o||"video"===o&&t.target.controls&&t.offsetY>e(t.target).height()-60)return!0}return"touchstart"!==t.type&&t.preventDefault(),f.stop(!0,!1),f.data("scrolling",!1),f.data("swipeEnded",!1),f.data("taplength",0),d=(new Date).getTime(),s=s||a(g),u=u||a(f),(m=s[1]>=u[1])?(p=r(t.originalEvent),h=0,c=f.translateX()):(p=i(t.originalEvent),h=[0,0],c=f.translate()),"mousedown"===t.type&&(n.on("mousemove."+w,T),f.on("mouseup."+w+" mouseout."+w,y)),"touchstart"===t.type}).on(TOUCH.MOVE+"."+w+" drag."+w,T).on(TOUCH.END+"."+w,y).on("removeSwipe."+w,function(){setTimeout(function(){f.data("scrolling",!1)},20),f.removeAttr("draggable"),f.add(n).off("."+w)}).on("selectstart."+w,function(e){return e.preventDefault(),!1})})}}(jQuery,jQuery(window),jQuery(document));