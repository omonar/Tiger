!function(e,t,n,o){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onSwipeStart:!1,onClick:!1,onFinished:!1,threshold:20,noSwipeInside:".caption",swipeoutSpeed:300,overThreshold:.25},o);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null};return this.each(function(){var r,s,u,l,d,p,h,c=e(this),f=c.parent(),g=c.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),w=!0,m=!0,S=null,v=c.hasClass("audio")||c.hasClass("video"),T=function(e){return!!(m||e.originalEvent.touches&&e.originalEvent.touches.length>1)||(e.preventDefault(),w?p=[function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null}(e.originalEvent)-d[0],0]:((p=i(e.originalEvent))[0]-=d[0],p[1]-=d[1]),c.translate([h[0]+p[0],h[1]+p[1]]),!1)},y=function(e){if(m||c.data("swipeEnded"))return!0;e.preventDefault(),c.data("swipeEnded",!0),m=!0;var t=(new Date).getTime()-l,a=1+o.swipeoutSpeed/t,i=function(){"function"==typeof o.onFinished&&o.onFinished.call(c[0],e)},u=function(){p&&"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(c[0],e),"function"==typeof o.onClick&&o.onClick.call(c[0],e)},d=function(t){t?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(c[0],e):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(c[0],e)};if("mouseup"===e.type||"mouseout"===e.type?(n.off("mousemove."+g),c.off("mouseup."+g+" mouseout."+g)):"pointerup"===e.type&&c.off("pointermove."+g+" pointerup."+g),c.data("taplength",t),w)if(Math.abs(p[0])>o.threshold){v=h[0]+p[0]*a;s[0]>=r[0]||p[0]>0&&v-r[0]/2>s[0]*(o.overThreshold-.5)||v+r[0]/2<s[0]*(.5-o.overThreshold)?(c.data("scrolling",!1),c.translateXAndFade(v,0,o.swipeoutSpeed),S=setTimeout(i,o.swipeoutSpeed+20),d(p[0]>0)):c.translateX(v,o.swipeoutSpeed)}else p[0]&&c.translateX(0,100),u();else if(function(e){return Array.isArray(e)?Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)):Math.abs(e)}(p)>o.threshold){var f=parseInt(c.css("top")),v=[h[0]+p[0]*a,p[1]>0?Math.min(-f,h[1]+p[1]*a):Math.max(-f+s[1]-r[1],h[1]+p[1]*a)];Math.abs(p[0])>Math.abs(p[1])&&(v[0]-r[0]/2>s[0]*(o.overThreshold-.5)||v[0]+r[0]/2<s[0]*(.5-o.overThreshold))?(c.data("scrolling",!1),c.translateAndFade(v,0,o.swipeoutSpeed),S=setTimeout(i,o.swipeoutSpeed+20),d(p[0]>=0)):c.translate(v,o.swipeoutSpeed)}else(p[0]||p[1])&&c.translate([0,0],100),u();return!1};c.add(n).off("."+g),c.data("lsw_ns",g),t.on("resize."+g,function(){clearTimeout(u),u=setTimeout(function(){s=a(f)},50)}),c.attr("draggable","false").on(TOUCH.START+"."+g+" dragstart."+g+" mousedown."+g,function(t){return!c.data("scrolling")&&(t.originalEvent.touches&&t.originalEvent.touches.length>1||"mousedown"===t.type&&1!==t.which||"A"===t.target.nodeName||"INPUT"===t.target.nodeName||"BUTTON"===t.target.nodeName||o.noSwipeInside&&e(t.target).closest(o.noSwipeInside).length?(m=!0,!0):v&&("AUDIO"===t.target.nodeName||"VIDEO"===t.target.nodeName&&t.target.controls&&t.offsetY>e(t.target).height()-60)?(m=!0,!0):(m=!1,"function"==typeof o.onSwipeStart&&o.onSwipeStart.call(c[0],t),"touchstart"!==t.type&&t.preventDefault(),c.stop(!0,!1),c.data("scrolling",!1),c.data("swipeEnded",!1),c.data("taplength",0),l=(new Date).getTime(),s=a(f),r=a(c),w=s[1]>=r[1],d=i(t.originalEvent),p=[0,0],h=c.translate(),"mousedown"===t.type&&(n.on("mousemove."+g,T),c.on("mouseup."+g+" mouseout."+g,y)),"touchstart"===t.type))}).on(TOUCH.MOVE+"."+g+" drag."+g,T).on(TOUCH.END+"."+g,y).on("removeSwipe."+g,function(){setTimeout(function(){c.data("scrolling",!1)},20),c.removeAttr("draggable"),c.add(n).off("."+g)}).on("selectstart."+g,function(e){return e.preventDefault(),!1})})}}(jQuery,jQuery(window),jQuery(document));