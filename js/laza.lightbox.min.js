!function(e,t,o,a,n){"use strict";e.fn.lightbox=function(n,s){if(typeof n===UNDEF)return this;s=e.extend({},e.fn.lightbox.defaults,s);var i,l,r,d,c,u,h,p,m,f,g,b,w,v,T,C,x,y,S,P,O,k,I,A,M,F=e(this),E=getTranslations(e.fn.lightbox.text),L=e([]),N=e(),D=e(),R=e(),z=e(),B=e(),U=e(),H=e(),V=e(),G=e(),Z=!0,q=!1,X=!1,W=!1,K=!1,_=!1,j=!1,Q=!1,Y=!1,$=null,ee=null,te=null,oe=null,ae=!1,ne=s.fitImages,se=-1,ie=0,le=0,re=s.fitPadding,de=F.data("llb_ns"),ce=!!s.hasOwnProperty("extraSizes")&&s.extraSizes.split(/,\s*/),ue=e("[data-audioplayer]"),he=ue.length&&!ue.data("paused"),pe=function(){return s.thumbsVisible&&L.length>1&&m&&m.length?m.outerHeight():0},me=function(){return c.hasClass(s.captionVisibleClass)&&U&&U.length?U.outerHeight():0},fe=function(e){l=e,Ce(!0)},ge=function(){var e=we();e<100&&(e=Math.min(100,e+20)),ve(e),fe(e)},be=function(){var e=we();e>0&&(e=Math.max(0,e-20)),ve(e),fe(e)},we=function(){return parseInt(M.val())},ve=function(e){M.val(e)},Te=function(e,t){s.zoomSlider?e||t?(c.addClass("show-zoom-level"),0===l?w.removeClass("icon-zoom-out icon-zoom-level").addClass("icon-zoom-in"):100===l?w.removeClass("icon-zoom-in icon-zoom-level").addClass("icon-zoom-out"):w.removeClass("icon-zoom-in icon-zoom-out").addClass("icon-zoom-level")):c.removeClass("show-zoom-level"):(c.toggleClass("show-zoom-out",t),c.toggleClass("show-zoom-in",e&&!t))},Ce=function(e,t){if(D&&D.length){var o,a,i=L.eq(se).data(J.OBJ),r=[c.width(),c.height()],u=n.getDimensions(i),h=n.getMaxDimensions(i),p=function(e){return Math.max((r[0]-2*re-2*d)/e[0],(r[1]-Math.max(o+a,2*re)-2*d)/e[1])},m=function(e){return Math.min((r[0]-2*re-2*d)/e[0],(r[1]-Math.max(o+a,2*re)-2*d)/e[1])};if(typeof d===UNDEF&&(d=parseInt(D.css("paddingTop"))),typeof re===UNDEF&&(re=s.hasOwnProperty("fitRatio")?Math.round((1-s.fitRatio)*Math.min(r[0],r[1])/2):0),o=pe()+re,a=me()+re,typeof l!==UNDEF&&null!==l||(l=ne?0:100,s.useZoom&&s.zoomSlider&&ve(l)),_||j||K||X&&z.hasClass("default")){var f=re;if(r[0]>640&&r[1]>640&&re<60&&(f=60),_||j)D.css({transition:"none",left:f,top:f+o,width:r[0]-2*f,height:r[1]-f-(o+a||f)}).show();else if(K)u[0]=Math.min(u[0],r[0]-2*f),u[1]=Math.min(u[1],r[1]-(o+a)),D.css({transition:"none",left:Math.round((r[0]-u[0])/2),top:Math.round(o+(r[1]-(o+a)-u[1])/2),width:Math.round(u[0]),height:Math.round(u[1])}).show();else{var g=Math.min((r[0]-2*f-2*d)/u[0],(r[1]-f-Math.max(o+a,f)-2*d)/u[1]);X&&(g=Math.min(1,g));T=[u[0]*g+2*d,u[1]*g+2*d];D.css({transition:"none",left:Math.round((r[0]-T[0])/2),top:Math.round(o+(r[1]-(o+a)-T[1])/2),width:Math.round(T[0]),height:Math.round(T[1])}).show()}s.useZoom&&Te(!1,!1)}else{var b,w,v,T,C,x=[0,0];if(b=Math.min(1,m(u)),w=q||X?Math.min(s.maxZoom,m(u)):h?Math.max(s.maxZoom,Math.min(h[0]/u[0],h[1]/u[1])):Math.min(s.maxZoom,m(u)),b>w){var y=b;b=w,w=y}if(s.useZoom&&s.zoomSlider?D.data("inited")?v=b+l*(w-b)/100:(v=Q?Math.min(s.maxZoom,p(u)):s.fitImages?Math.min(s.maxZoom,m(u)):1,l=100*Math.minMax(0,(v-b)/(w-b),1),ve(l),D.data("inited",!0)):v=Q?Math.min(s.maxZoom,ne?p(u):m(u)):ne?Math.min(s.maxZoom,m(u)):1,T=[u[0]*v,u[1]*v],C=Q&&(T[0]>r[0]||T[1]>r[1])||s.autoPano&&(u[0]/u[1]>2||u[0]/u[1]<.5625)&&(T[0]/r[0]>=s.panoramaAutoDetect||T[1]/r[1]>=s.panoramaAutoDetect),Z&&(h[0]>u[0]||h[1]>u[1])&&(T[0]>u[0]||T[1]>u[1])&&(!D.data("lastDims")||D.data("lastDims")[0]<T[0])&&(D.children("img").eq(0).attr("src",n.getOptimalImagePath(i,T,!0)),D.data("lastDims",T)),T=[T[0]+2*d,T[1]+2*d],e&&(typeof t===FUNCTION&&D.on("transitionEnd",function(){t.call(null)}),!s.zoomSlider||l>0)){var S,P;((S=D.translate())[0]||S[1])&&(T[0]>r[0]&&(x[0]=S[0]*T[0]/D.width(),(P=x[0]+(r[0]-T[0])/2)>.25*r[0]?x[0]=T[0]/2-r[0]/4:P+T[0]<.75*r[0]&&(x[0]=r[0]/4+1.5*T[0]),x[0]=Math.round(x[0])),T[1]>r[1]&&(x[1]=S[1]*T[1]/D.height(),(P=x[1]+(r[1]-T[1])/2)>.25*r[1]?x[1]=T[1]/2-r[1]/4:P+T[1]<.75*r[1]&&(x[1]=r[1]/4+1.5*T[1]),x[1]=Math.round(x[1])))}Z&&(C?oe=setTimeout(function(){D.autopano({direction:le})},550):(clearTimeout(oe),oe=null,D.trigger("autopanoRemove"))),D.css({transition:e?"transform "+s.transitionProps+", left "+s.transitionProps+", top "+s.transitionProps+", width "+s.transitionProps+", height "+s.transitionProps:"none",transform:"translate("+x[0]+"px,"+x[1]+"px)",left:Math.round((r[0]-T[0])/2),top:Math.round(o+(r[1]-(o+a)-T[1])/2),width:Math.round(T[0]),height:Math.round(T[1])}).show(),s.useZoom&&Te(v<w,v>b)}e||typeof t!==FUNCTION||t.call(null)}},xe=function(){switch(s.transitionType){case"crossFadeAndSlide":D.css({transition:"none",opacity:0,transform:"translateX("+100*le+"px)"}),window.requestAnimationFrame(function(){R.data("swiped")||R.one("transitionend",function(){R.remove(),R=e()}).css({transition:"transform "+s.speed/2+"ms ease-out, opacity "+s.speed/2+"ms ease-out",transform:"translateX("+-200*le+"px)",opacity:0}),D.one("transitionend",function(){window.requestAnimationFrame(ye)}).css({transition:"transform "+s.speed+"ms ease-out, opacity "+s.speed+"ms ease-out",transform:"translateX(0)",opacity:1})});break;case"crossFadeAndZoom":D.css({transition:"none",opacity:0,transform:"scale("+(1-le/40)+")"}),window.requestAnimationFrame(function(){R.data("swiped")||R.one("transitionend",function(){R.remove(),R=e()}).css({transition:"transform "+s.speed/2+"ms ease-out, opacity "+s.speed/2+"ms ease-out",transform:"scale("+(1+le/20)+")",opacity:0}),D.one("transitionend",function(){window.requestAnimationFrame(ye)}).css({transition:"transform "+s.speed+"ms ease-out, opacity "+s.speed+"ms ease-out",transform:"translateX(0) scale(1)",opacity:1})});break;default:D.css({transition:"none",opacity:0}),window.requestAnimationFrame(function(){R.data("swiped")||R.on("transitionEnd",function(){R.remove()}).css({transition:"opacity "+s.speed/2+"ms ease-out",opacity:0}),D.one("transitionend",function(){window.requestAnimationFrame(ye)}).css({transition:"opacity "+s.speed+"ms ease-out",opacity:1})})}},ye=function(){!1!==s.onLoadEnd&&s.onLoadEnd(N),s.preloadNext&&function(){var e;le<0&&se>0?e=L.eq(se-1).data(J.OBJ):se<L.length-2&&(e=L.eq(se+1).data(J.OBJ)),e&&"image"===e[J.CATEGORY]&&((new Image).src=n.getOptimalImagePath(e))}()},Se=function(){if(!(--ie>0)){if(h.hide(),DEBUG){var t=new Date;K||_?console.log((K?"External content":"360 player")+" loaded: "+(t-r)+"ms"):z.length&&(console.log((q||X?"Media":"Image")+" ["+se+"] loaded: "+(t-r)+'ms src="'+z[0].src+'"'),typeof z[0]!==UNDEF&&typeof B[0]!==UNDEF||console.log((z[0],UNDEF,"loadImage.done("+z[0].src+")")))}(Z||q||X)&&s.rightClickProtect&&B.on("contextmenu",function(e){return e.preventDefault(),!1}),(q||X)&&(B.attr({autoplay:s.videoAuto,loop:s.videoLoop}),B[0].volume=s.volume,B.on("volumechange."+de,function(){s.volume=this.volume})),H.length&&(H.find(".buttons a").trigger("removeTooltip"),H.length>1&&(H.eq(-1).prevAll("."+s.lightboxCaptionClass).remove(),H=c.find("."+s.lightboxCaptionClass)),H.one("transitionend",function(){H.remove(),H=e()}).css({transition:"opacity "+s.speed/2+"ms ease-out",opacity:0})),_||j||K&&D.children("iframe").length||D.swipe({onSwipeStart:function(){e(this).trigger("autopanoStop")},onSwipedLeft:function(){D.data("swiped",!0),Ke()},onSwipedRight:function(){D.data("swiped",!0),We()},onFinished:function(){Y||(e(this).trigger("removeSwipe"),e(this).remove())},onClick:function(t){c.data("panomove")?e(this).trigger("autopanoStop"):function(t){var o="touch"===e("html").data("whatinput")||"touchend"===t.type;if(q||X){var a=B[0];return a.paused?(a.play(),"ms"!==VEND&&(a.controls=!1),o&&(Ue(),c.hasClass(s.captionVisibleClass)&&Xe())):(a.pause(),"ms"!==VEND&&(a.controls=!0),o&&(ze(),qe())),!1}Z&&(o?Ue():s.clickForNext&&((t.pageX||t.originalEvent.pageX)-D.position().left>D.width()/2?Ke():We()))}(t)}}),Ce(!1),window.requestAnimationFrame(xe),$?(X||q)&&s.videoAuto?(Fe(),B[0].onended=function(){Ae()}):(clearTimeout($),$=setTimeout(Ke,s.slideshowDelay),I&&I.find(".progress").show()):s.autohideControls&&Be()}},Pe=function(e){(e=e||D).one("transitionend",function(){e.data("swiped",!1)}).css({transition:"opacity "+2*s.speed+"ms ease-out, transform "+2*s.speed+"ms ease-out",opacity:1,transform:"translateX(0)"})},Oe=function(o){if("number"!=typeof o&&(o=L.index(o)),o<0||o>=L.length){if(Y=!0,o<0)switch(s.afterLast){case"donothing":o=0;break;case"startover":o=L.length-1;break;case"onelevelup":s.level&&(window.location.href="../"+s.indexName),o=0;break;case"nextfolder":s.baseSet&&s.previousFoldersLast&&(window.location.href=s.previousFoldersLast),o=0;break;case"nextindex":s.baseSet&&s.previousFolderPath&&(window.location.href=s.previousFolderPath),o=0;break;default:o=0,ke()}else switch(s.afterLast){case"donothing":o=L.length-1,Me();break;case"startover":o=0;break;case"onelevelup":s.level&&(window.location.href="../"+s.indexName),o=L.length-1,Me();break;case"nextfolder":s.baseSet&&s.nextFoldersFirst&&(window.location.href=s.nextFoldersFirst+($?"&slideshow":"")),o=L.length-1;break;case"nextindex":s.baseSet&&s.nextFolderPath&&(window.location.href=s.nextFolderPath),o=L.length-1;break;case"ask":var l=new Array;return D.data("swiped")&&Pe(),o=L.length-1,L.length>1&&l.push({t:E.startOver,c:"icon-loop",h:function(e){Oe(0)}}),s.level&&l.push({t:s.level?E.upOneLevel:s.homepageLinkText||E.backToHome,c:"icon-one-level-up",h:function(){window.location.href="../"+s.indexName}}),l.push({t:E.backToIndex,c:"icon-arrow-up",h:function(){ke()}}),s.baseSet&&(s.nextFoldersFirst&&l.push({t:E.nextFolder,c:"icon-arrow-right",h:function(){window.location.href=s.nextFoldersFirst}}),s.nextFolderPath&&l.push({t:E.nextIndex,c:"icon-thumbnails",h:function(){window.location.href=s.nextFolderPath}})),void c.modal(e("<p>",{class:"text-center",text:E.atLastPageQuestion}),l,{onClose:function(){Oe(L.length-1)},class:"secondary",title:E.atLastPage});default:o=$?0:L.length-1,Me(),ke()}D.data("swiped")&&Pe()}else Y=!1;if(c.is(":visible")){if(le=Math.abs(o-se)>=L.length-1&&"startover"===s.afterLast?1:se>o?-1:se<o?1:0,se===o)return;V.hideAllTooltips(),s.autoHideControls&&Be()}else ae=!0,a.add(e("html")).css("overflow","hidden"),a.addClass(s.lightboxOnClass),le=0,s.lightboxFullscreen&&requestFullscreen(function(){c.addClass("fullscreen")}),s.useRating&&function(e){se>=0&&(typeof e===UNDEF&&(e=L.eq(se).data(J.OBJ)[J.VISITORRATING]||0),c.find("."+s.lightboxCaptionClass+" .ratingbox span").removeClass("r0 r1 r2 r3 r4 r5").addClass("r"+e))}(),c.show(),he=ue.length&&!ue.data("paused"),s.autoStart&&Ie(),je(Qe);c.find(".modal").trigger("destroy");var d;se=o,N=L.eq(se),d=N.data(J.OBJ),s.useThumbstrip&&L.length>1&&_e(),d?(h.show(),I&&I.find(".progress").hide(),function(e){if(q=X=W=Z=_=j=!1,K=e.hasOwnProperty(J.EXTERNAL),_=!K&&s.use360Player&&e.hasOwnProperty(J.PROJECTIONTYPE)&&"equirectangular"===e[J.PROJECTIONTYPE],Q=e.hasOwnProperty(J.PANORAMA)&&e[J.PANORAMA]||s.autoPano&&(e[J.IMAGE][J.WIDTH]>c.width()||e[J.IMAGE][J.HEIGHT]>c.height())&&(e[J.IMAGE][J.WIDTH]/e[J.IMAGE][J.HEIGHT]>2.4||e[J.IMAGE][J.HEIGHT]/e[J.IMAGE][J.WIDTH]>2),!K&&!_)switch(e[J.CATEGORY]){case"video":q=!0;break;case"audio":X=!0;break;case"other":W=!0,j="pdf"===n.getExtension(e).toLowerCase();break;default:Z=!0}}(d),!1!==s.onLoadStart&&s.onLoadStart(N),setTimeout(function(){if(R=c.find("."+s.lightboxMainClass),H=c.find("."+s.lightboxCaptionClass),R.length&&(R.trigger("autopanoRemove").off("."+de),s.muteBackgroundAudio&&he&&(X||q?ue.trigger("fadeOutPlayer"):ue.trigger("fadeInPlayer"))),ie=1,r=new Date,D=e("<div>",{class:"lightbox-main "+(K?"external":_?"vr":j?"pdf":d[J.CATEGORY])}).hide().appendTo(c),Z)B=z=e("<img>").appendTo(D),DEBUG&&console.log("Loading image ["+se+'] src="'+n.getOptimalImagePath(d)+'"'),z[0].complete&&z[0].naturalWidth>0?Se():z.one("load."+de,function(e){Se()}),z[0].src=n.getOptimalImagePath(d);else if(X||q){if(q){var o=n.getVideoDuration(d);B=z=e("<video>",{preload:"auto",controlsList:"nodownload",poster:n.getPosterPath(d)}),o>=2e3?B[0].controls="true":B[0].loop="true"}else{var a=n.getPosterPath(d);ie=2,z=e("<img>",{class:"poster"+(a.endsWith("poster.png")?" default":"")}).one("load",function(e){Se()}).attr("src",a).appendTo(D),B=e("<audio>",{preload:"auto",controls:"true",controlsList:"nofullscreen nodownload"})}B.one("loadedmetadata",function(e){Se()}).attr("src",n.getSourcePath(d)).appendTo(D),B.on("playing",Le).on("paused",Ne).on("ended",De),s.muteBackgroundAudio&&ue.length&&(he=!ue.data("paused"))}else if(K){var l=d[J.EXTERNAL].cont,u=d[J.EXTERNAL].size;u&&(u=u.split("x"),D.data({oWidth:parseInt(u[0]),oHeight:parseInt(u[1])})),D.one("DOMReady",function(e){Se()}),l.match(/^https?\:\/\//i)||l.match(/\.html?$/i)||l.match(/^\.\.\//)?D.addClass("iframe").append(e("<iframe>",{width:"100%",height:"100%",src:l,frameborder:0,allowfullscreen:"allowfullscreen"})):(l.match(/^<iframe/i)&&D.addClass("iframe"),D.append(l)),setTimeout(Se,200)}else if(_){var h=Math.round(c.width()*s.fitRatio),p=Math.round(c.height()*s.fitRatio);D.css({width:h,height:p}).attr("id","vr"+se).addClass("vr").show().one("DOMReady",Se),typeof PhotoSphereViewer!==UNDEF?setTimeout(function(){new PhotoSphereViewer({panorama:n.getAbsoluteImagePath(d),container:D[0],usexmpdata:!1,zoom_level:30,loading_html:'<div class="lightbox-loading"><div></div></div>',navbar:!0,navbar_style:{autorotateThickness:2,zoomRangeThickness:2,zoomRangeDisk:12,fullscreenThickness:2,backgroundColor:"rgba(17, 17, 17, 0.35)"}})},s.speed):console.log('Fatal Error: Missing "photo-sphere-viewer.min.js"!'),setTimeout(Se,200)}else{var m=D;j&&(m=!HASPDFVIEWER||ISIOSDEVICE?e("<iframe>",{src:"https://docs.google.com/viewer?url="+window.location.href.getDir()+n.getSourcePath(d)+"&embedded=true"}).appendTo(D):e("<object>",{type:"application/pdf"}).attr("data",n.getSourcePath(d)).appendTo(D)),e("<a>",{href:n.getSourcePath(d),target:"_blank"}).append(e("<img>",{class:"other"}).one("load",function(e){Se()}).attr("src",n.getImagePath(d))).appendTo(m),e("<p>",{class:"click-hint",html:E.clickToOpen}).appendTo(m)}!function(o){U=e("<div>",{class:s.lightboxCaptionClass+" scrollable"+($?" slideshow":"")});var a=e("<div>",{class:"caption"}),l=e("<div>",{class:"buttons"}),r=s.buttonLabels;if(o[J.IMAGECAPTION]&&a.append(o[J.IMAGECAPTION]),K||!o[J.PHOTODATA]||s.metaAsPopup||a.append(e("<div>",{class:"photodata",html:o[J.PHOTODATA]})),a.is(":empty")||(a.find("[data-tooltip]").addTooltip(),U.append(a)),s.useRating){var d=o[J.RATING]||0;if(s.visitorRating||d){var u;(i=e("<div>",{class:"ratingbox"}).appendTo(l)).append(e("<label>",{html:E.rating})),u=e("<span>",{class:"rating",html:STARS}).appendTo(i),s.visitorRating?(o.hasOwnProperty(J.VISITORRATING)?d=o[J.VISITORRATING]:(s.useJalbumRating||(d=0),o[J.VISITORRATING]=d),u.addClass("r"+d+(s.useJalbumRating?"":" icon-close")).on("click."+de,function(t){var a=e(this),n=Math.minMax(0,Math.floor((getCoords(t).x-a.offset().left-parseFloat(a.css("paddingLeft")))/16),5);return a.removeClass("r0 r1 r2 r3 r4 r5").addClass("r"+n),o[J.VISITORRATING]=n,F.trigger("refreshRating",L[se]),!1})):u.addClass("r"+d)}}if(!K&&ce&&"image"===o[J.CATEGORY]){i=e("<div>",{class:"download icon-download"}).appendTo(l);for(var h=n.getImagePath(o),p=0;p<ce.length;p++)i.append(e("<a>",{text:ce[p],href:h.replace("slides/","dl/"+ce[p]+"/"),download:""}))}if(s.printImage&&"image"===o[J.CATEGORY]&&!s.rightClickProtect&&(i=e("<a>",{class:s.buttonClass+" icon-printer"}).appendTo(l),r?i.html("<span>"+E.print+"</span>").data("tooltip",E.printLabel):i.data("tooltip",E.print),i.on("click",function(e){printImage(o[J.ORIGINAL]&&s.showDownload?n.getOriginalPath(o):n.getImagePath(o),o[J.TITLE]||"",o[J.THUMBCAPTION]||"")})),!K&&s.showDownload){var m;n.getOriginalPath(o)&&(Z||j||s.allowDownloadOthers)?m=n.getOriginalPath(o):Z&&s.allowDownloadScaled&&(m=n.getImagePath(o)),m&&(i=e("<a>",{class:s.buttonClass+" icon-download",href:m,html:r?"<span>"+E.download+"</span>":"",download:""}).appendTo(l),getFileSize(m,function(e,t){e&&t&&t.addTooltip(r?niceByte(e):E.download+" ["+niceByte(e)+"]")},i))}s.hasOwnProperty("shop")&&n.hasShop(o)&&s.showShop&&(a=n.getPriceRange(o),a=E.addCart+(a?" <b>"+a+"</b>":""),i=e("<a>",{class:s.buttonClass+" icon-shopping-cart-add"}).on("click",function(e){s.shop.root.trigger("addItems",o)}).appendTo(l),r?i.html("<span>"+a+"</span>").data("tooltip",E.shopLabel):i.data("tooltip",a),i=e("<a>",{class:s.buttonClass+" secondary icon-shopping-cart"}).on("click",function(e){s.shop.root.trigger("showCart")}).appendTo(l),r?i.html("<span>"+E.viewCart+"</span>").data("tooltip",E.viewCartLabel):i.data("tooltip",E.viewCart));if(s.hasOwnProperty("feedback")&&s.showFeedback&&(i=e("<a>",{class:s.buttonClass+" icon-email-send"}).on("click",function(e){s.feedback.root.trigger("addItems",o)}).appendTo(l),r?i.html("<span>"+E.addComment+"</span>").data("tooltip",E.feedbackLabel):i.data("tooltip",E.addComment)),!LOCAL&&typeof FOTOMOTO!==UNDEF&&s.fotomoto&&(i=e("<a>",{class:s.buttonClass+" icon-fotomoto"}).on("click",function(e){FOTOMOTO.API.showWindow(10,n.getOriginalPath(o)||n.getItemPath(o))}).appendTo(l),r?i.html("<span>"+E.fotomotoBtn+"</span>").data("tooltip",E.fotomotoTooltip):i.data("tooltip",E.fotomotoBtn)),!K&&o[J.PHOTODATA]&&s.metaAsPopup&&(i=e("<a>",{class:s.buttonClass+" icon-camera"}).appendTo(l),r?i.html("<span>"+E.metaBtn+"</span>").data("tooltip",E.metaLabel):i.data("tooltip",E.metaBtn),i.on("click",function(){return c.modal(e("<div>",{class:"photodata no-padding",html:o[J.PHOTODATA]}),{title:E.metaBtn}),!1})),!K&&s.showRegions&&o[J.REGIONS]&&(i=e("<a>",{class:s.buttonClass+" icon-facetag"}).appendTo(l),r?i.html("<span>"+(s.regionsBtn||E.regionsBtn)+"</span>").data("tooltip",E.regionsLabel):i.data("tooltip",s.regionsBtn||E.regionsBtn),i.on("click",function(){var t=c.find("."+s.regionsClass);if(t.length)t.remove();else{var a=JSON.parse(o[J.REGIONS]);t=e("<div>",{class:s.regionsClass}).appendTo(D);for(var n,i=0;i<a.length;i++)n=a[i].split(";"),t.append(e("<a>").css({left:100*parseFloat(n[1])+"%",top:100*parseFloat(n[2])+"%",width:100*parseFloat(n[3])+"%",height:100*parseFloat(n[4])+"%"}).append("<span>"+n[0]+"</span>"))}return!1})),s.showMap&&o[J.LOCATION]&&(i=e("<a>",{class:s.buttonClass+" icon-location"}).appendTo(l),r?i.html("<span>"+E.mapBtn+"</span>").data("tooltip",E.mapLabel):i.data("tooltip",E.mapBtn),i.on("click",function(){var a=e("<div>",{class:"map-cont"});return a.height(t.height()*s.mapHeight),c.modal(a,{class:"no-padding large"}),setTimeout(function(){a.addMap({apiKey:s.mapApiKey,type:s.mapType||"hybrid",zoom:s.mapZoom||16,location:o[J.LOCATION],fitBounds:!1,fullscreenControl:!1,onTypeChanged:function(e){s.mapType=e},onZoomChanged:function(e){s.mapZoom=e}})},100),!1})),!K&&o[J.MOSTPHOTOS]&&(i=e("<a>",{class:s.buttonClass+" icon-shopping-cart",target:"_blank",href:"https://mostphotos.com/"+o[J.MOSTPHOTOS]}).appendTo(l),r?i.html("<span>"+E.mostphotosBtn+"</span>").data("tooltip",E.mostphotosLabel):i.data("tooltip",E.mostphotosBtn)),(DEBUG||!LOCAL)&&s.share&&s.showShare&&(i=e("<a>",{class:s.buttonClass+" icon-connect"}).appendTo(l),r?i.html("<span>"+E.share+"</span>").data("tooltip",E.shareLabel):i.data("tooltip",E.share),i.on("click",function(){var t=e("<div>",{class:"social"});return c.modal(t,{title:E.shareOn}),setTimeout(function(){t.renderShares({sites:s.share,title:o[J.TITLE]||o[J.NAME].stripExt().replace(/[-_]/g," ").capitalize(),description:o[J.COMMENT],image:n.getOptimalThumbPath(o,[640,480]),href:n.getAbsolutePath(o)})},100),!1})),s.showNumbers&&l.prepend(e("<h4>",{class:"numbers",html:"<span>"+(se+1)+"</span> / "+L.length})),!X&&o[J.SOUNDCLIP]){G=e("<audio>",{class:"soundclip",src:o[J.SOUNDCLIP],controlsList:"nofullscreen nodownload noremote"});var f=e("<a>",{class:"button play-pause icon-play"});G[0].volume=.5,f.on("click",function(){f.hasClass("icon-pause")?Je():Ee()}),l.append(f).append(G),Ee()}else G=e();l.is(":empty")||(U.addClass(s.hasbuttonsClass),U.append(l),l.children("a").not("[download]").addTooltip()),U.is(":empty")?(c.removeClass(s.captionVisibleClass),c.addClass("no-caption")):(c.toggleClass(s.captionVisibleClass,s.captionVisible),c.removeClass("no-caption"),c.append(U))}(d)},s.speed/4)):console.log("Fatal error: image ("+se+") is missing from the database! (Upload data1.json again!)")},ke=function(){if(Me(!0),F.destroyAllTooltips(),ae=!1,a.add(e("html")).css("overflow",""),a.removeClass(s.lightboxOnClass),s.muteBackgroundAudio&&he&&ue.trigger("fadeInPlayer"),D.length){if((X||q)&&B){var t=B[0].volume,o=s.speed/(50*t),n=function(){if(B){var e=Math.max(B[0].volume-.02,0);e>.005?(B[0].volume=e,setTimeout(n,o)):B[0].pause()}};B.off("."+de),n()}c.fadeOut(s.speed,function(){SMALLSCREEN||exitFullscreen(function(){c.removeClass("fullscreen")}),D.length&&(D.remove(),D=e()),U.length&&(U.remove(),U=e()),!1!==s.onClose&&s.onClose(N)})}else SMALLSCREEN||exitFullscreen(function(){c.removeClass("fullscreen")}),!1!==s.onClose&&s.onClose(N)},Ie=function(e){clearTimeout($),$=setTimeout(Ke,s.slideshowDelay/4),k&&(k.hide(),I.show()),a.add(c).addClass(s.immerseClass),s.autohideControls&&Be(),U.addClass("slideshow"),!0!==e&&s.backgroundAudioSlideshowControl&&ue.trigger("fadeInPlayer"),s.slideshowFullscreen&&requestFullscreen(function(){c.addClass("fullscreen")}),!1!==s.onSlideshowStart&&s.onSlideshowStart(N)},Ae=function(){k&&(k.hide(),I.show()),s.autohideControls&&Be(),a.add(c).addClass(s.immerseClass),$=setTimeout(Ke,s.slideshowDelay/4),s.backgroundAudioSlideshowControl&&ue.trigger("fadeInPlayer")},Me=function(e){!1!==s.onSlideshowPause&&s.onSlideshowPause(N),!0!==e&&s.backgroundAudioSlideshowControl&&ue.trigger("fadeOutPlayer"),k&&(k.show(),I.hide()),clearTimeout($),$=null,U.show().removeClass("slideshow"),a.add(c).removeClass(s.immerseClass),ze(),s.slideshowFullscreen&&!s.lightboxFullscreen&&exitFullscreen(function(){c.removeClass("fullscreen")}),!1!==s.onSlideshowPause&&s.onSlideshowPause(N)},Fe=function(){s.backgroundAudioSlideshowControl&&ue.trigger("fadeOutPlayer"),clearTimeout($),$=null,ze()},Ee=function(){if(G.length){var e,t=G.siblings(".play-pause");(e=G[0].play())&&e.then(function(){t.removeClass("icon-play").addClass("icon-pause")},function(e){t.removeClass("icon-pause").addClass("icon-play"),console.log(e)})}},Je=function(){if(G.length){var e=G.siblings(".play-pause");G[0].pause(),e.removeClass("icon-pause").addClass("icon-play")}},Le=function(){s.muteBackgroundAudio&&(he=!ue.data("paused"))&&ue.trigger("fadeOutPlayer"),Ee()},Ne=function(){s.muteBackgroundAudio&&he&&ue.trigger("fadeInPlayer"),Je()},De=function(){s.muteBackgroundAudio&&(he=!1),Je()},Re=function(){s.useZoom&&s.zoomSlider?(ne=!0,ve(l=l>50?0:100)):ne=!ne,Ce(!0)},ze=function(){clearTimeout(ee),c.removeClass(s.controlsHideClass)},Be=function(){clearTimeout(ee),ee=setTimeout(function(){clearTimeout(ee),V.hideAllTooltips(),c.addClass(s.controlsHideClass)},$?Math.min(s.slideshowDelay/2,s.hideControlsDelay):s.hideControlsDelay)},Ue=function(){c.toggleClass(s.controlsHideClass,!He())},He=function(){return c.hasClass(s.controlsHideClass)},Ve=function(){isFullscreen()?exitFullscreen(function(){c.removeClass("fullscreen")}):requestFullscreen(function(){c.addClass("fullscreen")})},Ge=function(){V.hideAllTooltips(),c.addClass(s.thumbsVisibleClass),s.thumbsVisible=!0,tt(),Ce(!0)},Ze=function(){V.hideAllTooltips(),c.removeClass(s.thumbsVisibleClass),s.thumbsVisible=!1,tt(),Ce(!0)},qe=function(){c.addClass(s.captionVisibleClass),s.captionVisible=!0,tt(),Ce(!0)},Xe=function(){V.hideAllTooltips(),c.removeClass(s.captionVisibleClass),s.captionVisible=!1,tt(),Ce(!0)},We=function(){Oe(se-1)},Ke=function(){Oe(se+1)},_e=function(){if(s.useThumbstrip&&!(L.length<2)){var e=f.children().eq(se<0?0:se),t=e.position().left,o=e.width(),a=f.translateX(),n=m.width(),i=f.width();f.children().removeClass(s.activeClass),e.addClass(s.activeClass),t<-a?f.translateX(Math.min(0,s.thumbOverhead-t),s.thumbSpeed,je):t+o>n-a?f.translateX(Math.max(n-t-o-s.thumbOverhead,n-i),s.thumbSpeed,je):n-a>i&&f.translateX(n-i,s.thumbSpeed,je)}},je=function(t){if(c.is(":visible")&&s.useThumbstrip&&!(L.length<2)){var o=m.width(),a=f.translateX()||0;f.children("."+s.lazyloadClass).each(function(){var t=e(this),n=t.position().left,i=t.width();if(n+a<o&&n+i+a>0)t.removeClass(s.lazyloadClass),function(t){if(t.length){var o=e("<img>",{class:"hide-image"}).one("load",function(){e(this).removeClass("hide-image").addClass("show-image")}).attr("src",t.attr("href"));s.rightClickProtect&&o.on("contextmenu",function(e){return e.preventDefault(),!1}),t.append(o).removeAttr("href")}}(t),t.addTooltip({delay:1e3});else if(n+a>=o)return!1}),typeof t===FUNCTION&&t.call(this)}},Qe=function(){if(c.is(":visible")){var e=f.children(":last-child");e.position().left+e.outerWidth()>m.width()?(p.addClass(s.scrollClass),_e()):(p.removeClass(s.scrollClass),f.translateX(0,s.thumbSpeed))}},Ye=function(e){var t=m.width(),o=f.translateX()||0;t>f.width()?o&&f.translateX(0,s.thumbSpeed,je):(o=e<0?Math.min(0,o+t):Math.max(t-f.width(),o-t),f.translateX(o,s.thumbSpeed,je))},$e=function(){s.thumbsVisible&&c.addClass(s.thumbsVisibleClass),(p=e("<div>",{class:"thumb-strip"}).appendTo(c)).append(e("<button>",{class:"left icon-caret-left"}).on("click."+de,function(e){return Ye(-1),!1})),p.append(e("<button>",{class:"right icon-caret-right"}).on("click."+de,function(e){return Ye(1),!1})),(m=e("<div>",{class:"thumb-cont"}).appendTo(p)).on("selectstart."+de,function(e){return!1});var t,o,a,i=(f=e("<div>",{class:"thumbs"}).appendTo(m)).height()||60,l=0;L.each(function(r){t=e(this).data(J.OBJ),(a=e("<a>",{class:s.lazyloadClass,title:t[J.THUMBCAPTION]||"",href:n.getThumbPath(t)}).appendTo(f)).on("click",function(t){var o=e(t.target).closest("a");return Oe(f.children().index(o)),!1}),o=Math.min(t[J.THUMB][J.WIDTH],(i-4)*t[J.THUMB][J.WIDTH]/t[J.THUMB][J.HEIGHT]),a.width(o),l+=o})},et=function(){if(V=e("<div>",{class:s.controlsClass+(s.controlsUseText?" use-text":"")}).appendTo(c),L.length>1&&(g=e("<button>",{type:"button",class:"lightbox-btn previous icon-caret-left",title:E.previousPicture,text:s.controlsUseText?E.previousPictureShort:""}).on("click."+de,We).appendTo(V)),b=e("<button>",{type:"button",class:"lightbox-btn up icon-arrow-up",title:E.upOneLevel,text:s.controlsUseText?E.upOneLevelShort:""}).on("click."+de,ke).appendTo(V),s.useZoom)if(s.zoomSlider){var t=e("<div>",{class:"zoom-control"}),o=e("<a>",{class:"zoom-out button"}).appendTo(t);M=e("<input>",{name:"zoom-level",type:"range"}).appendTo(t);var a=e("<a>",{class:"zoom-in button"}).appendTo(t);w=e("<button>",{type:"button",class:"lightbox-btn zoom-level icon-zoom-level",text:s.controlsUseText?E.zoom:""}).on("click."+de,function(){return ae&&("touch"!==e("html").data("whatinput")||M.is(":visible"))&&Re(),!1}).addTooltip(e("<div>",{class:"zoom-panel"}).append(t),{delay:200,pos:[1,0,1,2]}).appendTo(V),M.on("change",function(){return fe(parseInt(M.val())),!0}),a.on("click",ge),o.on("click",be)}else v=e("<button>",{type:"button",class:"lightbox-icon zoom-in icon-expand",title:E.oneToOneSize,text:s.controlsUseText?E.oneToOneSizeShort:""}).on("click."+de,Re).appendTo(V),T=e("<button>",{type:"button",class:"lightbox-icon zoom-out icon-contract",title:E.fitToScreen,text:s.controlsUseText?E.fitToScreenShort:""}).on("click."+de,Re).appendTo(V);s.useThumbstrip&&L.length>1&&(y=e("<button>",{type:"button",class:"lightbox-icon show-thumbs icon-show-top-panel",title:E.showThumbs,text:s.controlsUseText?E.showThumbsShort:""}).on("click."+de,Ge).appendTo(V),S=e("<button>",{type:"button",class:"lightbox-icon hide-thumbs icon-hide-top-panel",title:E.hideThumbs,text:s.controlsUseText?E.hideThumbsShort:""}).on("click."+de,Ze).appendTo(V)),P=e("<button>",{type:"button",class:"lightbox-icon show-caption icon-show-bottom-panel",title:E.showInfo,text:s.controlsUseText?E.showInfoShort:""}).on("click."+de,qe).appendTo(V),O=e("<button>",{type:"button",class:"lightbox-icon hide-caption icon-hide-bottom-panel",title:E.hideInfo,text:s.controlsUseText?E.hideInfoShort:""}).on("click."+de,Xe).appendTo(V),s.useSlideshow&&L.length>1&&(k=e("<button>",{type:"button",class:"lightbox-icon play icon-play",title:E.startSlideshow,text:s.controlsUseText?E.startSlideshowShort:""}).on("click."+de,Ie).appendTo(V),I=e("<button>",{type:"button",class:"lightbox-icon pause icon-pause",title:E.pause,text:s.controlsUseText?E.pauseShort:""}).append(e("<span>",{class:"progress"})).on("click."+de,Me).appendTo(V)),s.showFullscreen&&hasFullscreen()&&(C=e("<button>",{type:"button",class:"lightbox-icon fullscreen icon-fullscreen",title:E.fullscreen,text:s.controlsUseText?E.fullscreenShort:""}).on("click."+de,Ve).appendTo(V),x=e("<button>",{type:"button",class:"lightbox-icon exitfullscreen icon-fullscreen-off",title:E.exitFullscreen,text:s.controlsUseText?E.exitFullscreenShort:""}).on("click."+de,Ve).appendTo(V),isFullscreen()&&c.addClass("fullscreen")),L.length>1&&(A=e("<button>",{type:"button",class:"lightbox-btn next icon-caret-right",title:E.nextPicture,text:s.controlsUseText?E.nextPictureShort:""}).on("click."+de,Ke).appendTo(V)),V.children("button").not(".zoom-level").addTooltip({delay:1e3,pos:[1,0,1,2]})},tt=function(){var t,o,a={};for(t in s.prefsKept)o=s.prefsKept[t],s.hasOwnProperty(o)&&(a[o]=s[o]);a&&e.cookie("lb_pref",a)};if(de&&function(o){t.add(document).off("."+o),e("#"+o).remove()}(de),F.data("llb_ns",de="llb_"+Math.floor(1e4*Math.random())),L=F.find(s.delegate),function(){var t,o,a=e.cookie("lb_pref");if(a)for(t in s.prefsKept)o=s.prefsKept[t],a.hasOwnProperty(o)&&(s[o]="true"===a[o]||"false"===a[o]?!!a[o]:a[o])}(),function(t){c=e("<div>",{id:t,class:"lightbox"}).hide().appendTo(F),u=e("<div>",{class:"lightbox-overlay"}).appendTo(c),h=e("<div>",{class:"lightbox-loading"}).append("<div>").appendTo(c),c.toggleClass(s.thumbsVisibleClass,s.thumbsVisible&&L.length>1),c.toggleClass(s.captionVisibleClass,s.captionVisible),et(),s.useThumbstrip&&L.length>1&&$e()}(),t.on("resize."+de,function(){clearTimeout(te),te=setTimeout(function(){clearTimeout(te),!D||!D.length||_&&isFullscreen()||Ce(),je(Qe)},50)}),s.quitOnDocClick&&u.on("click."+de,function(t){if(s.autohideControls&&He())return ze(),!1;D.length&&!e(t.target).is(D)&&ke()}),s.autohideControls&&o.on("mousemove."+de,function(){ze(),Be()}),s.enableKeyboard&&o.on("keyup."+de,function(e){if(!ae||!D.length||c.children(".modal:visible").length||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName))return!0;switch(e.preventDefault(),e.keyCode){case 27:ke();break;case 33:case 37:We();break;case 34:case 39:Ke();break;case 97:case 35:Oe(L.length-1);break;case 103:case 36:Oe(0);break;case 106:case 179:$?Me():Ie();break;case 107:s.useZoom&&s.zoomSlider?ge():Re();break;case 109:s.useZoom&&s.zoomSlider&&be();break;case 32:q||X?B[0].paused?B[0].play():B[0].pause():$?Me():Ie();break;default:return!0}return!1}),s.enableMouseWheel){var ot=null;c.on("mousewheel."+de+" DOMMouseScroll."+de,function(t){if(ae){if(clearTimeout(ot),!D.length||e(t.target).closest("."+s.lightboxCaptionClass).length||D.hasClass("pdf")||D.hasClass("external")||c.children(".modal:visible").length)return!0;ot=s.useZoom&&s.zoomSlider&&1==t.ctrlKey?setTimeout(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?ge:be,100):setTimeout(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?We:Ke,100)}return!1})}return F.on("lightboxLoad."+de,function(e,t,o){t=typeof t===NUMBER?Math.minMax(0,t,L.length):typeof t===UNDEF?0:L.index(t),!1!==s.onStart&&s.onStart(typeof t===NUMBER?L.eq(t):th),Oe(t),$&&Me(!0),o&&(typeof o===NUMBER?setTimeout(Ie,o):Ie())}).on("lightboxQuit."+de,function(){return ke(),!1}).on("lightboxRemove."+de,function(){return Me(!0),ae=!1,L.off("."+de),o.add(t).add(c).off("."+de),a.add(e("html")).css("overflow",""),a.removeClass(s.lightboxOnClass),D.length?D.animate({opacity:0},s.speed,function(){c.remove(),s.lightboxFullscreen&&exitFullscreen()}):(s.lightboxFullscreen&&exitFullscreen(),c.remove()),!1}).on("stopAutoHide."+de,function(){clearTimeout(ee)}).on("lightboxContainer."+de,function(){return c}).on("lightboxNext."+de,function(){return Me(),Ke(),!1}).on("lightboxPrevious."+de,function(){return Me(),We(),!1}),s.hasOwnProperty("onReady")&&typeof s.onReady===FUNCTION&&s.onReady(N),s.autoStart&&s.baseSet&&Ie(),this},e.fn.lightbox.defaults={delegate:".card.lbable",lightboxMainClass:"lightbox-main",lightboxCaptionClass:"lightbox-caption",lightboxOnClass:"lightbox-on",controlsClass:"controls",buttonClass:"secondary button small",buttonClass:"button",lazyloadClass:"lazyload",activeClass:"active",scrollClass:"scroll",regionsClass:"regions",captionVisibleClass:"caption-visible",thumbsVisibleClass:"thumbs-visible",hasbuttonsClass:"hasbuttons",immerseClass:"immerse",controlsVisibleClass:"controls-visible",controlsHideClass:"controls-hide",transitionProps:"300ms ease-out",slideshowDelay:4e3,hideControlsDelay:2500,prefsKept:["thumbsVisible","captionVisible"],controlsUseText:!1,thumbsVisible:!0,useThumbstrip:!0,captionVisible:!0,fitImages:!0,fitBoth:!0,fitBetween:!0,fitRatio:.94,maxZoom:1.4,useZoom:!0,zoomSlider:!1,linkOriginals:!1,hiDpi:!1,showFullscreen:!1,indexName:"index.html",baseSet:!0,autohideControls:!0,autoStart:!1,clickForNext:!0,useSlideshow:!0,backgroundAudioSlideshowControl:!1,muteBackgroundAudio:!0,use360Player:!0,lightboxFullscreen:!1,slideshowFullscreen:!1,afterLast:"donothing",mapHeight:.8,mapApiKey:"",mapType:"hybrid",mapZoom:15,showShopBtn:!1,showFeedback:!1,showLowestPrice:!1,videoAuto:!1,videoLoop:!1,autoPano:!1,volume:.5,rightClickProtect:!1,useRating:!1,jalbumRating:!1,visitorRating:!1,buttonLabels:!0,showNumbers:!1,showShare:!1,showDownload:!1,allowDownloadScaled:!1,allowDownloadOthers:!1,showMap:!1,showRegions:!0,printImage:!1,metaAsPopup:!0,transitionType:"crossFadeAndSlide",speed:400,panoramaAutoDetect:1.5,panoramaTreshold:[2.5,2.5],defaultPosterSize:[628,360],thumbSpeed:400,thumbOverhead:40,preloadNext:!0,enableKeyboard:!0,enableMouseWheel:!0,quitOnEnd:!0,quitOnDocClick:!0,onStart:!1,onClose:!1,onLoadStart:!1,onLoadEnd:!1,onReady:!1,onSlideshowStart:!1,onSlideshowPause:!1},e.fn.lightbox.text={startOver:"Start over",upOneLevel:"Up one level",upOneLevelShort:"Exit",backToHome:"Back to home",backToIndex:"Back to index page",nextFolder:"Next folder",nextIndex:"Next index page",atLastPageQuestion:"Where to go next?",atLastPage:"At last page",atFirstPage:"At first page",previousPicture:"Previous image",previousPictureShort:"Prev",nextPicture:"Next image",nextPictureShort:"Next",zoom:"Zoom",oneToOneSize:"1:1 size",oneToOneSizeShort:"1:1",fitToScreen:"Fit to screen",fitToScreenShort:"Fit",fullscreen:"Full screen",exitFullscreen:"Exit full screen",fullscreenShort:"Fullscr",exitFullscreenShort:"Normal",showThumbs:"Show thumbnail strip",showThumbsShort:"Thumbnails",hideThumbs:"Hide thumbnail strip",hideThumbsShort:"Hide thumbs",showInfo:"Show caption / info",showInfoShort:"Info",hideInfo:"Hide caption / info",hideInfoShort:"Hide info",startSlideshow:"Start slideshow",startSlideshowShort:"Play",pause:"Pause",pauseShort:"Pause",rating:"Rating",download:"Download",print:"Print",printLabel:"Print out this photo on your printer",mapBtn:"Map",mapLabel:"Show the photo location on map",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, share, send free eCards",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",regionsBtn:"People",regionsLabel:"Show tagged people",share:"Share",shareLabel:"Share this photo over social sites",shareOn:"Share on",shopBtn:"Buy",shopLabel:"Add this item to the shopping cart",viewCartLabel:"View shopping cart",feedbackLabel:"View feedback window",metaBtn:"Photo data",metaLabel:"Display photographic (Exif/Iptc) data",viewCart:"View cart",addCart:"Add to cart",addComment:"Add comment",clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));