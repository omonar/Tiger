!function(e,t,o,a,n){"use strict";e.fn.lightbox=function(n,s){if(typeof n===UNDEF)return this;s=e.extend({},e.fn.lightbox.defaults,s);var i,l,r,d,c,h,u,p,m,f,g,b,T,v,w,C,x,y,S,k,O,P,I=e(this),A=getTranslations(e.fn.lightbox.text),E=e([]),L=e(),F=e(),D=e(),M=e(),N=e(),B=!0,V=!1,H=!1,U=!1,R=!1,z=!1,X=!1,G=!1,W=!1,q=null,_=null,Z=null,K=-1,Q=0,Y=0,j=s.hasOwnProperty("fitPadding")?s.fitPadding:null,$=I.data("llb_ns"),ee=!!s.hasOwnProperty("extraSizes")&&s.extraSizes.split(/,\s*/),te=e("[data-audioplayer]"),oe=te.length&&!te.data("paused"),ae=function(t){var o,a,n,i,l=c.width(),r=c.height(),h=D[0],u=D.hasClass("default");if(clearTimeout(q),F&&F.length){if(clearTimeout(Z),typeof d===UNDEF&&(d=2*parseInt(F.css("paddingTop"))),typeof j===UNDEF&&(j=Math.round((1-s.fitRatio)*Math.min(l,r)/2)),!(o=F.data("oWidth"))||!(a=F.data("oHeight")))if(B||H)o=typeof h.naturalWidth===UNDEF?h.width||D.width():h.naturalWidth,a=typeof h.naturalHeight===UNDEF?h.height||D.height():h.naturalHeight;else if(V)o=h.videoWidth,a=h.videoHeight;else if(R||z||X)o=l-d,a=r-d;else{var p=E.eq(K).data(J.OBJ);o=Math.max(240,p[J.IMAGE][J.WIDTH]),a=p[J.IMAGE][J.HEIGHT]}o&&a?(F.data({oWidth:o,oHeight:a}),n=0,d&&(l-=d,r-=d),s.fitImages&&s.fitBetween&&(c.hasClass(s.captionVisibleClass)&&N&&N.length&&(r-=N.outerHeight()),s.thumbsVisible&&E.length>1&&m&&m.length&&(r-=n=m.outerHeight())),i=(r-2*j)/a,!s.fitBoth&&B||(i=Math.min((l-2*j)/o,i)),U||R||z||X||H&&u||(s.fitImages?(i<1||s.scaleUp)&&(o=Math.round(o*i),a=Math.round(a*i)):HIDPI&&i<=1&&!s.scaleUp&&(o=Math.round(o/2),a=Math.round(a/2),i*=2)),(R||z||X)&&(o=Math.min(l-2*j,o),a=Math.min(r-2*j,a)),!0===t?F.css({left:Math.round((l-o)/2),top:Math.round(n+(r-a)/2),width:o+d,height:a+d,opacity:0}).show():F.stop(!0,!1).animate({left:Math.round((l-o)/2),top:Math.round(n+(r-a)/2),width:o+d,height:a+d},500,function(){e(this).translateX(0,500)}),U||R||z||X||i>=1&&!s.scaleUp||u?c.addClass("no-zoom"):(c.removeClass("no-zoom"),c.toggleClass("zoomed",s.fitImages?i>1:i<1))):t&&(q=setTimeout(ae,!0,100))}},ne=function(t){var o="touch"===e("html").data("whatinput")||"touchend"===t.type;if(V||H){var a=M[0];a.paused?(a.play(),"ms"!==VEND&&(a.controls=!1),o&&(xe(),c.hasClass(s.captionVisibleClass)&&ve())):(a.pause(),"ms"!==VEND&&(a.controls=!0),o&&(we(),Te()))}else B&&(o?(xe(),c.hasClass(s.captionVisibleClass)||Te()):s.clickForNext&&((t.pageX||t.originalEvent.pageX)-F.position().left>F.width()/2?ke():Se()))},se=function(){if(!(--Q>0)){if(DEBUG){var t=new Date;R||z?console.log((R?"External content":"360 player")+" loaded: "+(t-r)+"ms"):D.length&&(console.log((V||H?"Media":"Image")+" ["+K+"] loaded: "+(t-r)+'ms src="'+D[0].src+'"'),typeof D[0]!==UNDEF&&typeof M[0]!==UNDEF||console.log((D[0],UNDEF,"loadImage.done("+D[0].src+")")))}switch(F.hide().css("opacity",0),s.transitionType){case"crossFadeAndSlide":F.translateXAndFade(100*Y,0);break;case"crossFadeAndZoom":F.transform({scale:1-Y/40,opacity:0})}(B||V||H)&&s.rightClickProtect&&M.on("contextmenu",function(e){return e.preventDefault(),!1}),(V||H)&&(M.attr("autoplay",s.videoAuto),M[0].volume=s.volume,M.on("volumechange."+$,function(){s.volume=this.volume})),setTimeout(function(){switch(ae(!0),u.hide(),F.show(),s.transitionType){case"crossFadeAndSlide":F.translateXAndFade(0,1,s.speed);break;case"crossFadeAndZoom":F.transform({scale:[1,1],opacity:1},s.speed);break;default:F.opacity(1,s.speed)}setTimeout(function(){z||R&&F.children("iframe").length||F.swipe({onSwipedLeft:function(){G=!0,ke()},onSwipedRight:function(){G=!0,Se()},onFinished:function(){W||(e(this).trigger("removeSwipe"),e(this).remove())},onClick:ne}),!1!==s.onLoadEnd&&s.onLoadEnd(L),s.preloadNext&&function(){var e;Y<0&&K>0?e=E.eq(K-1).data(J.OBJ):K<E.length-2&&(e=E.eq(K+1).data(J.OBJ)),e&&"image"===e[J.CATEGORY]&&((new Image).src=n.getImagePath(e))}()},s.speed/2)},50),l?H||V?(he(),M[0].onended=function(){de()}):(clearTimeout(l),O&&O.find(".progress").show(),l=setTimeout(ke,s.slideshowDelay)):(ce(!0),s.autohideControls&&ye())}},ie=function(o){if("number"!=typeof o&&(o=E.index(o)),o<0||o>=E.length){if(W=!0,o<0)switch(s.afterLast){case"donothing":o=0;break;case"startover":o=E.length-1;break;case"onelevelup":s.level&&(window.location.href="../"+s.indexName),o=0;break;case"nextfolder":s.baseSet&&s.previousFoldersLast&&(window.location.href=s.previousFoldersLast),o=0;break;default:o=0,le()}else switch(s.afterLast){case"donothing":o=E.length-1;break;case"startover":o=0;break;case"onelevelup":s.level&&(window.location.href="../"+s.indexName),o=E.length-1;break;case"nextfolder":s.baseSet&&s.nextFoldersFirst&&(window.location.href=s.nextFoldersFirst),o=E.length-1;break;case"ask":var d=new Array;return G&&(F.translateXAndFade(0,1,2*s.speed),G=!1),o=E.length-1,E.length>1&&d.push({t:A.startOver,c:"icon-loop",h:function(e){ie(0)}}),s.level&&d.push({t:s.level?A.upOneLevel:s.homepageLinkText||A.backToHome,c:"icon-up-one-level",h:function(){window.location.href="../"+s.indexName}}),d.push({t:A.backToIndex,c:"icon-index",h:function(){le()}}),s.baseSet&&s.nextFoldersFirst&&d.push({t:A.nextFolder,c:"icon-arrow-right",h:function(){window.location.href=s.nextFoldersFirst}}),void c.modal(e("<p>",{class:"text-center",text:A.atLastPageQuestion}),d,{onClose:function(){ie(E.length-1)},class:"secondary",title:A.atLastPage});default:o=E.length-1,le()}G&&(F.translateXAndFade(0,1,2*s.speed),G=!1)}else W=!1;if(c.is(":visible")){if(Y=K>o?-1:K<o?1:0,K===o)return}else a.css("overflow","hidden"),Y=0,s.useFullScreen&&e("html").fullScreen(!0),c.show(),oe=te.length&&!te.data("paused"),s.autoStart&&re(),Pe(Ie);c.find(".modal").trigger("destroy");var h;K=o,L=E.eq(K),h=L.data(J.OBJ),s.useThumbstrip&&E.length>1&&Oe(),h?(u.show(),O&&O.find(".progress").hide(),function(e){if(V=H=U=B=z=X=!1,R=e.hasOwnProperty(J.EXTERNAL),z=!R&&s.use360Player&&e.hasOwnProperty(J.PROJECTIONTYPE),!R&&!z)switch(e[J.CATEGORY]){case"video":V=!0;break;case"audio":H=!0;break;case"other":U=!0,X="pdf"===n.getExtension(e);break;default:B=!0}}(h),!1!==s.onLoadStart&&s.onLoadStart(L),setTimeout(function(){if(function(){var e=c.find(".lightbox-main"),t=c.find(".lightbox-caption");if(e.length&&(e.off("."+$),s.muteBackgroundAudio&&oe&&(H||V?te.trigger("fadeOutPlayer"):te.trigger("fadeInPlayer")),!G))switch(s.transitionType){case"crossFadeAndSlide":e.translateXAndFade(-100*Y,0,s.speed,function(){e.remove()});break;case"crossFadeAndZoom":e.transform({scale:1+Y/40,opacity:0},s.speed,function(){e.remove()});break;default:e.opacity(0,s.speed,function(){e.remove()})}t.length&&(t.find(".buttons a").trigger("removeTooltip"),t.length>1&&(t.eq(-1).prevAll(".lightbox-caption").remove(),t=c.find(".lightbox-caption")),t.opacity(0,s.speed,function(){t.remove()}))}(),G=!1,Q=1,r=new Date,F=e("<div>",{class:"lightbox-main "+(R?"external":z?"vr":X?"pdf":h[J.CATEGORY])}).hide().appendTo(c),B)M=D=e("<img>").one("load."+$,function(e){se()}).attr("src",n.getImagePath(h)).appendTo(F),DEBUG&&console.log("Loading image ["+K+'] src="'+n.getImagePath(h)+'"'),D[0].complete&&D[0].naturalWidth>0&&(D.off("load."+$),se());else if(H||V){if(V)M=D=e("<video>",{preload:"auto",controls:"true",controlsList:"nodownload",poster:n.getPosterPath(h)});else{var o=n.getPosterPath(h);Q=2,D=e("<img>",{class:"poster"+(o.endsWith("poster.png")?" default":"")}).one("load",function(e){se()}).attr("src",o).appendTo(F),M=e("<audio>",{preload:"auto",controls:"true",controlsList:"nofullscreen nodownload"})}M.one("loadedmetadata",function(e){se()}).attr("src",n.getSourcePath(h)).appendTo(F),s.muteBackgroundAudio&&te.length&&(M.on("playing",ue).on("paused",pe).on("ended",me),oe=!te.data("paused"))}else if(R){var a=h[J.EXTERNAL].cont,d=h[J.EXTERNAL].size;d&&(d=d.split("x"),F.data({oWidth:parseInt(d[0]),oHeight:parseInt(d[1])})),F.one("DOMReady",function(e){se()}),a.match(/^https?\:\/\//i)||a.match(/\.html?$/i)||a.match(/^\.\.\//)?F.addClass("iframe").append(e("<iframe>",{width:"100%",height:"100%",src:a,frameborder:0,allowfullscreen:"allowfullscreen"})):(a.match(/^<iframe/i)&&F.addClass("iframe"),F.append(a)),setTimeout(se,200)}else if(z){var u=Math.round(c.width()*s.fitRatio),p=Math.round(c.height()*s.fitRatio);F.css({width:u,height:p}).attr("id","vr"+K).addClass("vr").show().one("DOMReady",se),setTimeout(function(){new PhotoSphereViewer({panorama:n.getAbsoluteImagePath(h),container:F[0],usexmpdata:!1,zoom_level:30,loading_html:'<div class="lightbox-loading"><div></div></div>',navbar:!0,navbar_style:{autorotateThickness:2,zoomRangeThickness:2,zoomRangeDisk:12,fullscreenThickness:2,backgroundColor:"rgba(17, 17, 17, 0.35)"}})},s.speed),setTimeout(se,200)}else{var m=F;X&&(m=!HASPDFVIEWER||ISIOSDEVICE?e("<iframe>",{src:"https://docs.google.com/viewer?url="+window.location.href.getDir()+n.getSourcePath(h)+"&embedded=true"}).appendTo(F):e("<object>",{type:"application/pdf"}).attr("data",n.getSourcePath(h)).appendTo(F)),e("<a>",{href:n.getSourcePath(h),target:"_blank"}).append(e("<img>",{class:"other"}).one("load",function(e){se()}).attr("src",n.getImagePath(h))).appendTo(m),e("<p>",{class:"click-hint",html:A.clickToOpen}).appendTo(m)}!function(o){N=e("<div>",{class:"lightbox-caption"+(l?" slideshow":"")}).hide().appendTo(c);var a=e("<div>",{class:"buttons"}),r=s.buttonLabels&&c.width()>=640;if(ee&&"image"===o[J.CATEGORY]){i=e("<div>",{class:"download icon-download"}).appendTo(a);for(var d=n.getImagePath(o),h=0;h<ee.length;h++)i.append(e("<a>",{text:ee[h],href:d.replace("slides/","dl/"+ee[h]+"/"),download:""}))}s.printImage&&"image"===o[J.CATEGORY]&&(i=e("<a>",{class:s.buttonClass+" icon-printer"}).appendTo(a),r?i.text(" "+A.print).data("tooltip",A.printLabel):i.data("tooltip",A.print),i.on("click",function(e){printImage(o[J.ORIGINAL]&&!s.hideDownload?o[J.ORIGINAL][J.PATH]:o[J.IMAGE][J.PATH],o[J.TITLE]||"",o[J.THUMBCAPTION]||"")})),!o[J.ORIGINAL]||s.hideDownload||"image"!==o[J.CATEGORY]&&!s.allowDownloadOthers||(i=e("<a>",{class:s.buttonClass+" icon-download",download:"",href:n.getOriginalPath(o)}).appendTo(a),r?i.text(" "+A.download):i.data("tooltip",A.download)),s.hasOwnProperty("shop")&&n.hasShop(o)&&(i=e("<a>",{class:s.buttonClass+" icon-shopping-cart"}).on("click",function(e){s.shop.root.trigger("addItems",o)}).appendTo(a),r?i.text(" "+A.addCart).data("tooltip",A.shopLabel):i.data("tooltip",A.addCart),i=e("<a>",{class:s.buttonClass+" secondary icon-shopping-cart"}).on("click",function(e){s.shop.root.trigger("showCart")}).appendTo(a),r?i.text(" "+A.viewCart):i.data("tooltip",A.viewCart)),s.hasOwnProperty("feedback")&&(i=e("<a>",{class:s.buttonClass+" icon-email"}).on("click",function(e){s.feedback.root.trigger("addItems",o)}).appendTo(a),r?i.text(" "+A.addComment).data("tooltip",A.feedbackLabel):i.data("tooltip",A.addComment)),!LOCAL&&typeof FOTOMOTO!==UNDEF&&s.fotomoto&&(i=e("<a>",{class:s.buttonClass+" icon-fotomoto"}).on("click",function(e){FOTOMOTO.API.showWindow(10,n.getOriginalPath(o)||n.getItemPath(o))}).appendTo(a),r?i.text(" "+A.fotomotoBtn).data("tooltip",A.fotomotoTooltip):i.data("tooltip",A.fotomotoBtn)),o[J.PHOTODATA]&&s.metaAsPopup&&(i=e("<a>",{class:s.buttonClass+" icon-camera"}).appendTo(a),r?i.text(" "+A.metaBtn).data("tooltip",A.metaLabel):i.data("tooltip",A.metaBtn),i.on("click",function(){return c.modal(e("<div>",{class:"photodata",html:o[J.PHOTODATA]}),{class:"small",title:A.metaBtn}),!1})),o[J.REGIONS]&&(i=e("<a>",{class:s.buttonClass+" icon-user"}).appendTo(a),r?i.text(" "+(s.regionsBtn||A.regionsBtn)).data("tooltip",A.regionsLabel):i.data("tooltip",s.regionsBtn||A.regionsBtn),i.on("click",function(){var t=c.find("."+s.regionsClass);if(t.length)t.remove();else{var a=JSON.parse(o[J.REGIONS]);t=e("<div>",{class:s.regionsClass}).appendTo(F);for(var n,i=0;i<a.length;i++)n=a[i].split(";"),t.append(e("<a>").css({left:100*parseFloat(n[1])+"%",top:100*parseFloat(n[2])+"%",width:100*parseFloat(n[3])+"%",height:100*parseFloat(n[4])+"%"}).append("<span>"+n[0]+"</span>"))}return!1})),o[J.LOCATION]&&(i=e("<a>",{class:s.buttonClass+" icon-location"}).appendTo(a),r?i.text(" "+A.mapBtn).data("tooltip",A.mapLabel):i.data("tooltip",A.mapBtn),i.on("click",function(){var a=e("<div>",{class:"map-cont"});return a.height(t.height()*s.mapHeight),c.modal(a,{class:"no-padding"}),setTimeout(function(){a.addMap({location:o[J.LOCATION],type:s.mapType,zoom:s.mapZoom,fitBounds:!1,fullscreenControl:!1,onTypeChanged:function(e){s.mapType=e},onZoomChanged:function(e){s.mapZoom=e}})},100),!1})),o[J.MOSTPHOTOS]&&(i=e("<a>",{class:s.buttonClass+" icon-shopping-cart",target:"_blank",href:"https://mostphotos.com/"+o[J.MOSTPHOTOS]}).appendTo(a),r?i.text(" "+A.mostphotosBtn).data("tooltip",A.mostphotosLabel):i.data("tooltip",A.mostphotosBtn)),s.share&&s.showShare&&(i=e("<a>",{class:s.buttonClass+" icon-connect"}).appendTo(a),r?i.text(" "+A.share).data("tooltip",A.shareLabel):i.data("tooltip",A.share),i.on("click",function(){var t=e("<div>",{class:"share-cont social-links text-center"});return c.modal(t,{class:"small",title:A.shareOn}),setTimeout(function(){t.renderShares({sites:s.share,title:o[J.TITLE]||o[J.NAME],description:o[J.COMMENT],image:n.getAbsoluteImagePath(o),href:n.getAbsolutePath(o)})},100),!1})),s.showNumbers&&a.prepend(e("<h4>",{class:"numbers",html:"<span>"+(K+1)+"</span> / "+E.length})),o[J.SOUNDCLIP]&&a.append(e("<audio>",{class:"soundclip",src:o[J.SOUNDCLIP],controls:"controls"})),a.is(":empty")||(N.addClass(s.hasbuttonsClass),N.append(a),a.children("a").addTooltip()),o[J.IMAGECAPTION]&&(N.append(e("<div>",{class:"caption",html:o[J.IMAGECAPTION]})),N.find("[data-tooltip]").addTooltip()),o[J.PHOTODATA]&&!s.metaAsPopup&&N.append(e("<div>",{class:"photodata",html:o[J.PHOTODATA]})),s.captionVisible&&!N.is(":empty")?(c.addClass(s.captionVisibleClass),N.show()):(c.removeClass(s.captionVisibleClass),s.captionVisible?N.remove():N.show())}(h)},s.speed/4)):console.log("Fatal error: image ("+K+") is missing from the database! (Upload data1.json again!)")},le=function(){if(ce(!0),a.css("overflow",""),s.muteBackgroundAudio&&oe&&te.trigger("fadeInPlayer"),F.length){if((H||V)&&M){var t=M[0].volume,o=s.speed/(50*t),n=function(){if(M){var e=Math.max(M[0].volume-.02,0);e>.005?(M[0].volume=e,setTimeout(n,o)):M[0].pause()}};M.off("."+$),n()}c.fadeOut(s.speed,function(){s.useFullScreen&&e("html").fullScreen(!1),F.length&&(F.remove(),F=e()),N.length&&(N.remove(),N=e()),!1!==s.onClose&&s.onClose(L)})}else!1!==s.onClose&&s.onClose(L)},re=function(e){clearTimeout(l),k&&(k.hide(),O.show()),c.addClass(s.playingClass),s.autohideControls&&ye(),N.addClass("slideshow"),l=setTimeout(ke,s.slideshowDelay/4),!0!==e&&s.backgroundAudioSlideshowControl&&te.trigger("fadeInPlayer"),!1!==s.onSlideshowStart&&s.onSlideshowStart(L)},de=function(){s.autohideControls&&ye(),c.addClass(s.playingClass),l=setTimeout(ke,s.slideshowDelay/4),s.backgroundAudioSlideshowControl&&te.trigger("fadeInPlayer")},ce=function(e){!1!==s.onSlideshowPause&&s.onSlideshowPause(L),!0!==e&&s.backgroundAudioSlideshowControl&&te.trigger("fadeOutPlayer"),k&&(k.show(),O.hide()),l=clearTimeout(l),N.show().removeClass("slideshow"),c.removeClass(s.playingClass),_=clearTimeout(_)},he=function(){s.backgroundAudioSlideshowControl&&te.trigger("fadeOutPlayer"),l=clearTimeout(l),we()},ue=function(){s.muteBackgroundAudio&&(oe=!te.data("paused"))&&te.trigger("fadeOutPlayer")},pe=function(){s.muteBackgroundAudio&&oe&&te.trigger("fadeInPlayer")},me=function(){oe=!1},fe=function(){s.fitImages=!s.fitImages,Je(),ae()},ge=function(){c.addClass(s.thumbsVisibleClass),s.thumbsVisible=!0,Je(),ae()},be=function(){c.removeClass(s.thumbsVisibleClass),s.thumbsVisible=!1,Je(),ae()},Te=function(){c.addClass(s.captionVisibleClass),s.captionVisible=!0,Je(),ae()},ve=function(){c.removeClass(s.captionVisibleClass),s.captionVisible=!1,Je(),ae()},we=function(){_=clearTimeout(_),c.removeClass(s.controlsHideClass)},Ce=function(){_=clearTimeout(_),g.hideAllTooltips(),c.addClass(s.controlsHideClass)},xe=function(){c.hasClass(s.controlsHideClass)?we():Ce()},ye=function(){clearTimeout(_),_=setTimeout(Ce,l?Math.min(s.slideshowDelay/2,1500):1500)},Se=function(){ie(K-1)},ke=function(){ie(K+1)},Oe=function(){if(s.useThumbstrip&&!(E.length<2)){var e=f.children().eq(K<0?0:K),t=e.position().left,o=e.width(),a=f.translateX(),n=m.width(),i=f.width();f.children().removeClass(s.activeClass),e.addClass(s.activeClass),t<-a?f.translateX(Math.min(0,s.thumbOverhead-t),s.thumbSpeed,Pe):t+o>n-a?f.translateX(Math.max(n-t-o-s.thumbOverhead,n-i),s.thumbSpeed,Pe):n-a>i&&f.translateX(n-i,s.thumbSpeed,Pe)}},Pe=function(t){if(c.is(":visible")&&s.useThumbstrip&&!(E.length<2)){var o=m.width(),a=f.translateX()||0;f.children("."+s.lazyloadClass).each(function(){var t=e(this),n=t.position().left,i=t.width();if(n+a<o&&n+i+a>0)t.removeClass(s.lazyloadClass),function(t){if(t.length){var o=e("<img>",{class:"hide-image"}).one("load",function(){e(this).removeClass("hide-image").addClass("show-image")}).attr("src",t.attr("href"));s.rightClickProtect&&o.on("contextmenu",function(e){return e.preventDefault(),!1}),t.append(o).removeAttr("href")}}(t),t.addTooltip({delay:1e3});else if(n+a>=o)return!1}),"function"==typeof t&&t.call(this)}},Ie=function(){if(c.is(":visible")){var e=f.children(":last-child");e.position().left+e.outerWidth()>m.width()?(p.addClass(s.scrollClass),Oe()):(p.removeClass(s.scrollClass),f.translateX(0,s.thumbSpeed))}},Ae=function(e){var t=m.width(),o=f.translateX()||0;t>f.width()?o&&f.translateX(0,s.thumbSpeed,Pe):(o=e<0?Math.min(0,o+t):Math.max(t-f.width(),o-t),f.translateX(o,s.thumbSpeed,Pe))},Ee=function(){s.thumbsVisible&&c.addClass(s.thumbsVisibleClass),(p=e("<div>",{class:"thumb-strip"}).appendTo(c)).append(e("<button>",{class:"left icon-drop-left"}).on("click."+$,function(e){return Ae(-1),!1})),p.append(e("<button>",{class:"right icon-drop-right"}).on("click."+$,function(e){return Ae(1),!1})),(m=e("<div>",{class:"thumb-cont"}).appendTo(p)).on("selectstart."+$,function(e){return!1});var t,o,a,i=(f=e("<div>",{class:"thumbs"}).appendTo(m)).height()||60,l=0;E.each(function(r){t=e(this).data(J.OBJ),(a=e("<a>",{class:s.lazyloadClass,title:t[J.THUMBCAPTION]||"",href:n.getThumbPath(t)}).appendTo(f)).on("click",function(t){var o=e(t.target).closest("a");return ie(f.children().index(o)),!1}),o=(i-4)*t[J.THUMB][J.WIDTH]/t[J.THUMB][J.HEIGHT],a.width(o),l+=o})},Le=function(){g=e("<div>",{class:"controls"+(s.controlsUseText?" use-text":"")}).appendTo(c),E.length>1&&(b=e("<button>",{type:"button",class:"lightbox-btn previous icon-previous",title:A.previousPicture,text:s.controlsUseText?A.previousPictureShort:""}).on("click."+$,Se).appendTo(g)),T=e("<button>",{type:"button",class:"lightbox-btn up icon-up-light",title:A.upOneLevel,text:s.controlsUseText?A.upOneLevelShort:""}).on("click."+$,le).appendTo(g),s.useZoom&&(v=e("<button>",{type:"button",class:"lightbox-icon zoom-in icon-expand",title:A.oneToOneSize,text:s.controlsUseText?A.oneToOneSizeShort:""}).on("click."+$,fe).appendTo(g),w=e("<button>",{type:"button",class:"lightbox-icon zoom-out icon-contract",title:A.fitToScreen,text:s.controlsUseText?A.fitToScreenShort:""}).on("click."+$,fe).appendTo(g)),s.useThumbstrip&&E.length>1&&(C=e("<button>",{type:"button",class:"lightbox-icon show-thumbs icon-show-top-thumbs",title:A.showThumbs,text:s.controlsUseText?A.showThumbsShort:""}).on("click."+$,ge).appendTo(g),x=e("<button>",{type:"button",class:"lightbox-icon hide-thumbs icon-hide-top-thumbs",title:A.hideThumbs,text:s.controlsUseText?A.hideThumbsShort:""}).on("click."+$,be).appendTo(g)),y=e("<button>",{type:"button",class:"lightbox-icon show-caption icon-show-bottom-panel",title:A.showInfo,text:s.controlsUseText?A.showInfoShort:""}).on("click."+$,Te).appendTo(g),S=e("<button>",{type:"button",class:"lightbox-icon hide-caption icon-hide-bottom-panel",title:A.hideInfo,text:s.controlsUseText?A.hideInfoShort:""}).on("click."+$,ve).appendTo(g),s.useSlideshow&&E.length>1&&(k=e("<button>",{type:"button",class:"lightbox-icon play icon-slideshow",title:A.startSlideshow,text:s.controlsUseText?A.startSlideshowShort:""}).on("click."+$,re).appendTo(g),O=e("<button>",{type:"button",class:"lightbox-icon pause icon-pause",title:A.pause,text:s.controlsUseText?A.pauseShort:""}).append(e("<span>",{class:"progress"})).on("click."+$,ce).appendTo(g)),E.length>1&&(P=e("<button>",{type:"button",class:"lightbox-btn next icon-next",title:A.nextPicture,text:s.controlsUseText?A.nextPictureShort:""}).on("click."+$,ke).appendTo(g)),g.children("button").addTooltip({delay:1e3})},Je=function(){var t,o,a={};for(t in s.prefsKept)o=s.prefsKept[t],s.hasOwnProperty(o)&&(a[o]=s[o]);a&&e.cookie("lb_pref",a)};if($&&function(o){t.add(document).off("."+o),e("#"+o).remove()}($),I.data("llb_ns",$="llb_"+Math.floor(1e4*Math.random())),E=I.find(s.delegate),function(){var t,o,a=e.cookie("lb_pref");if(a)for(t in s.prefsKept)o=s.prefsKept[t],a.hasOwnProperty(o)&&(s[o]="true"===a[o]||"false"===a[o]?!!a[o]:a[o])}(),function(t){c=e("<div>",{id:t,class:"lightbox"}).hide().appendTo("body"),h=e("<div>",{class:"lightbox-overlay"}).appendTo(c),u=e("<div>",{class:"lightbox-loading"}).append("<div>").appendTo(c),c.toggleClass(s.thumbsVisibleClass,s.thumbsVisible&&E.length>1),c.toggleClass(s.captionVisibleClass,s.captionVisible),c.toggleClass("zoomed",s.fitImages),Le(),s.useThumbstrip&&E.length>1&&Ee()}(),"touch"!==e("html").data("whatinput")&&c.on("mousemove."+$,function(){c.hasClass(s.controlsHideClass)&&we(),s.autohideControls&&ye()}),t.on("resize."+$,function(){clearTimeout(Z),Z=setTimeout(function(){clearTimeout(Z),!F||!F.length||z&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)||ae(),Pe(Ie)},50)}),s.quitOnDocClick&&h.on("click."+$,function(t){F.length&&!e(t.target).is(F)&&le()}),s.enableKeyboard&&o.on("keyup."+$,function(e){if(!F.length||c.children(".modal:visible").length||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName))return!0;switch(e.preventDefault(),e.keyCode){case 27:le();break;case 33:case 37:Se();break;case 34:case 39:ke();break;case 97:case 35:ie(E.length-1);break;case 103:case 36:ie(0);break;case 106:case 179:l?ce():re();break;case 107:fe();break;case 109:s.captionVisible||s.thumbsVisible?s.thumbsVisible=s.captionVisible=!1:(c.addClass(s.thumbsVisibleClass).addClass(s.captionVisibleClass),s.thumbsVisible=s.captionVisible=!0),Je(),ae();break;case 32:V||H?M[0].paused?M[0].play():M[0].pause():l?ce():re();break;default:return!0}return!1}),s.enableMouseWheel){var Fe=null;c.on("mousewheel."+$+" DOMMouseScroll."+$,function(e){return Fe=clearTimeout(Fe),!(F.length&&!F.hasClass("pdf")&&!c.children(".modal:visible").length)||(Fe=setTimeout(e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?Se:ke,100),!1)})}return I.on("lightboxLoad."+$,function(e,t,o){ce(!0),t="number"==typeof t?Math.minMax(0,t,E.length):typeof t===UNDEF?0:E.index(t),!1!==s.onStart&&s.onStart("number"==typeof t?E.eq(t):th),ie(t),o&&("number"==typeof o?setTimeout(re,o):re())}).on("lightboxQuit."+$,function(){return le(),!1}).on("lightboxRemove."+$,function(){return ce(!0),E.off("."+$),o.add(t).add(c).off("."+$),a.css("overflow",""),F.length?F.animate({opacity:0},s.speed,function(){c.remove()}):c.remove(),!1}).on("lightboxContainer."+$,function(){return c}).on("lightboxNext."+$,function(){return ce(),ke(),!1}).on("lightboxPrevious."+$,function(){return ce(),Se(),!1}),s.hasOwnProperty("onReady")&&e.isFunction(s.onReady)&&s.onReady(L),s.autoStart&&s.baseSet&&re(),this},e.fn.lightbox.defaults={delegate:".card.lbable",buttonClass:"button small",lazyloadClass:"lazyload",activeClass:"active",scrollClass:"scroll",regionsClass:"regions",captionVisibleClass:"caption-visible",thumbsVisibleClass:"thumbs-visible",hasbuttonsClass:"hasbuttons",controlsVisibleClass:"controls-visible",controlsHideClass:"controls-hide",playingClass:"playing",slideshowDelay:4e3,prefsKept:["thumbsVisible","captionVisible","fitImages"],controlsUseText:!1,thumbsVisible:!0,useThumbstrip:!0,captionVisible:!0,fitImages:!0,fitBoth:!0,fitBetween:!0,fitRatio:.94,scaleUp:!1,useZoom:!0,indexName:"index.html",baseSet:!0,autohideControls:!0,autoStart:!1,clickForNext:!0,useSlideshow:!0,backgroundAudioSlideshowControl:!1,muteBackgroundAudio:!0,use360Player:!0,useFullScreen:!1,afterLast:"donothing",mapHeight:.8,videoAuto:!1,volume:.5,rightClickProtect:!1,buttonLabels:!0,showNumbers:!1,showShare:!1,allowDownloadOthers:!1,hideDownload:!1,printImage:!1,metaAsPopup:!0,transitionType:"crossFadeAndSlide",speed:400,thumbSpeed:400,thumbOverhead:40,preloadNext:!0,enableKeyboard:!0,enableMouseWheel:!0,quitOnEnd:!0,quitOnDocClick:!0,onStart:!1,onClose:!1,onLoadStart:!1,onLoadEnd:!1,onReady:!1,onSlideshowStart:!1,onSlideshowPause:!1},e.fn.lightbox.text={startOver:"Start over",upOneLevel:"Up one level",upOneLevelShort:"Exit",backToHome:"Back to home",backToIndex:"Back to index page",nextFolder:"Next folder",atLastPageQuestion:"Where to go next?",atLastPage:"At last page",atFirstPage:"At first page",previousPicture:"Previous image",previousPictureShort:"Prev",nextPicture:"Next image",nextPictureShort:"Next",oneToOneSize:"1:1 size",oneToOneSizeShort:"1:1",fitToScreen:"Fit to screen",fitToScreenShort:"Fit",showThumbs:"Show thumbnail strip",showThumbsShort:"Thumbnails",hideThumbs:"Hide thumbnail strip",hideThumbsShort:"Hide thumbs",showInfo:"Show caption / info",showInfoShort:"Info",hideInfo:"Hide caption / info",hideInfoShort:"Hide info",startSlideshow:"Start slideshow",startSlideshowShort:"Play",pause:"Pause",pauseShort:"Pause",download:"Download",print:"Print",printLabel:"Print out this photo on your printer",mapBtn:"Map",mapLabel:"Show the photo location on map",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, share, send free eCards",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",regionsBtn:"People",regionsLabel:"Show tagged people",share:"Share",shareLabel:"Share this photo over social sites",shareOn:"Share on",shopBtn:"Buy",shopLabel:"Add this item to the shopping cart",viewCartLabel:"View shopping cart",feedbackLabel:"View feedback window",metaBtn:"Photo data",metaLabel:"Display photographic (Exif/Iptc) data",viewCart:"View cart",addCart:"Add to cart",addComment:"Add comment",clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery,jQuery(window),jQuery(document),jQuery("body"));